{"title":"Data 1 & 2","markdown":{"yaml":{"title":"Data 1 & 2","description":"Combined notes from Data 1 & 2 with Anand Sokhey and Andy Phillips","author":[{"name":"Stone Neilon","url":"https://stoneneilon.github.io/","orcid":"0009-0006-6026-4384","affiliation":"PhD student of political science @ The University of Colorado Boulder","affiliation-url":"https://www.colorado.edu/polisci/people/graduate-students/stone-neilon"}],"date":"05-15-2024","categories":["Spring","Fall",2024,"Methods",2023],"citation":{"url":"https://stoneneilon.github.io/notes/Data/"},"image":"oppy.jpg","bibliography":"ref.bib","draft":false},"headingText":"Preface","containsRefs":false,"markdown":"\n\n\nThese notes were compiled in my first year of graduate school. These two classes cover simple to complex linear regression. Additionally, some other methods are discussed such as Logit/Probit, Causal Inference, and time-series. These other methods were only discussed in brief and require their own separate set of notes.\n\nReminder: These are notes and do not encompass every idea or detail associated with the concepts. They do not (and cannot) replace classes or reading the material.\n\n# Section 1: Descriptive Statistics\n\nWhile simple, it is critical you understand these. It is okay if you forget (and you will), just remember to keep reviewing. It helps to walk through the formula step by step. I have provided some commentary on the rationale behind the formula in the sections below.\n\nYou should always include descriptive statistics because it convinces your audience that they care. And it provides a guide to interpreting later analysis.\n\n## Mean (Average)\n\n$$\n\\bar{x} = \\frac{\\sum_{i=1}^{n} x_i}{n}\n$$\n\nAbove is the formula for mean (average).\n\n## Median\n\n$$\n\\text{Median} = \\begin{cases}       x_{\\frac{n+1}{2}} & \\text{if } n \\text{ is odd} \\\\      \\frac{1}{2}(x_{\\frac{n}{2}} + x_{\\frac{n}{2} + 1}) & \\text{if } n \\text{ is even}    \\end{cases}\n$$\n\nDon't worry about knowing this formula. Arrange everything in order. Select the middle number.\n\n## Mode\n\n1.  Another measure of central tendency\n\n    1.  Mode is simply what number appears the most in our dataset.\n\n        1.  {4,7,3,7,8,1,7,8,9,4,7}\n\n            1.  Our mode would be 7\n\n                1.  It appears the most.\n\n2.  We don't use mode that much as a measure of central tendency but it still provides some information about the distribution.\n\n3.  Don't worry about the formula\n\n## Variance\n\n$$\n\\text{Variance} (s^2) = \\frac{\\sum_{i=1}^{n} (x_i - \\bar{x})^2}{n-1}\n$$\n\n1.  The average of the squared differences from the Mean. \n\n2.  Variance is a measure of SPREAD.\n\n3.  Let's walk through the formula step by step.\n\n    1.  The $\\Sigma$ means to sum all the values together.\n\n    2.  $(x_i - \\bar{x})$\n\n        1.  in this part we are taking each observation and subtracting it by the mean (average).\n\n        2.  Now lets add the square term. $(x_i - \\bar{x})^2$\n\n            1.  Why do we square this?\n\n                1.  Imagine a number line from 0 to 100. We have some dataset where the mean is 50. Now let's say one of our observations is 38. 38-50 = -12. See what happens!? We have a negative number. All observations to the left of our mean are negative while all observations to the right of our mean are positive.\n\n                    1.  When we add these all up without the square term, we get ZERO!\n\n                2.  Thus we square to accommodate for these canceling out.\n\n                    1.  There are other reasons we square but they aren't relevant here and this is the main reason.\n\n        3.  Now the $n-1$\n\n            1.  N represents the number of observations.\n\n                1.  Why are we subtracting it by 1?\n\n                    1.  If we were calculating the population variance, then we wouldn't subtract by 1. However, we are pretty much never working with the population. We are always using some samples. \n\n                    2.  This part is not super intuitive. BUT, we are using the sample mean, NOT the population mean to calculate the variance.\n\n                        1.  We don't know what the \"true\" population mean is. We have an estimate of it using our sample. Thus, there is some uncertainty around the sample mean (we don't know if the sample mean is = to the population mean). To account for this uncertainty we add a -1 to our denominator. \n\n                            1.  By subtracting 1 from the denominator this makes the spread a little larger to account for that uncertainty. Think about what happens when we make our denominator smaller compared to if we don't. Example:\n\n                                1.  $\\frac{16}{4-1}$ vs. $\\frac{16}{4}$\n\n                                    1.  the one with the $4-1$ denominator will have a larger output and thus account for the uncertainty in our measurement.\n\n## Standard Deviation\n\n$$\n\\text{Sample Standard Deviation} (s) = \\sqrt{\\frac{\\sum_{i=1}^{n} (x_i - \\bar{x})^2}{n-1}}\n$$\n\n1.  Standard deviation is denoted by $s$ or $\\sigma$ (lower case sigma).\n\n2.  Standard deviation represents how far the numbers are from each other.\n\n    1.  Look how similar this equation is compared to the variance equation.\n\n        1.  The standard deviation is the square root of the variance!\n\n3.  I won't explain the whole formula again.\n\n    1.  I will explain why we square root the equation\n\n        1.  We take the square root to put the output back into its original units. Our output is in the same units as the mean.\n\n4.  Have a good understanding of standard deviation THEN understand standard error.\n\n## Standard Error\n\n$$\n\\text{Standard Error} (\\text{SE}) = \\frac{s}{\\sqrt{n}}\n$$\n\n1.  The numerator (s) is standard deviation!\n\n2.  What is standard error?\n\n    1.  It is the standard deviation of the means!\n\n3.  OK, so what is the difference between standard deviation and standard error?\n\n    1.  Standard deviation quantifies the variation within a **set** of measurements. (singular)\n\n    2.  Standard error quantifies the variation in the means from **multiple** sets of measurements. (multiple)\n\n        1.  What is confusing is that we can get standard error from one single measurement, even though it describes the means from multiple sets. **Thus, even if you only have a single set of measurements, you are often given the option to plot the standard error.**\n\n            1.  Just watch the damn video.\n\n                1.  <https://www.youtube.com/watch?v=A82brFpdr9g>\n\n4.  Why do we take the square root of observations in the denominator? \n\n    1.  By dividing by the square root of the sample size, we're essentially adjusting for the fact that the standard deviation of the sampling distribution of the mean tends to decrease as the sample size increases. This is due to the Central Limit Theorem, which states that the sampling distribution of the sample mean becomes approximately normal as the sample size increases, with a mean equal to the population mean and a standard deviation equal to the population standard deviation divided by the square root of the sample size. (chat gpt gave me this and it is a kick ass explanation)\n\n        1.  It is because of this that standard error gets smaller when we have more observations! \n\n## Skewness\n\nYou do not need to know the formula. You just need to know what skewness looks like and how to properly identify when your data is skewed.\n\nWhen our distribution has no skew, the mean, median, and mode are all the same value.\n\n![Skewness Visualized](skewness.jpeg)\n\nPositive skewness is also called \"right skew\". Notice where the mean/median/mode are.\n\nNegative skewness is also called \"left skew\". Notice where the mean/median/mode are.\n\n## Covariance\n\n$$\n\\text{Covariance} (\\text{cov}(X, Y)) = \\frac{\\sum_{i=1}^{n} (x_i - \\bar{x})(y_i - \\bar{y})}{n-1}\n$$\n\n1.  A measure of how much two random variables vary together\n\n    1.  Similar to variance BUT covariance deals with two variables.\n\n2.  Let's walk through the formula.\n\n    1.  The numerator tells us to take the sum of each observation minus its mean for both variables (x and y). Then multiply. \n\n        1.  Remember we divide by N-1 because we are using the sample means and not the population means. Thus we have a bit of uncertainty. By subtracting 1, it makes our denominator smaller and subsequently the output larger, representing the greater uncertainty. \n\n3.  The output of covariance is a number that tells us the **direction** of how these two variables vary together. \n\n    1.  It does not tell us the strength of the relationship between the two variables. \n\n4.  Look how similar this formula is compared to the variance formula! \n\n5.  Covariance is influenced by the scale of the variables. \n\n    2.  Meaning its hard to read/understand by itself.\n\n## Correlation\n\n$$\nr = \\frac{\\sum_{i=1}^{n} (x_i - \\bar{x})(y_i - \\bar{y})}{\\sqrt{\\sum_{i=1}^{n} (x_i - \\bar{x})^2} \\cdot \\sqrt{\\sum_{i=1}^{n} (y_i - \\bar{y})^2}}\n$$\n\n1.  This formula looks scary! It actually is super simple!\n\n    1.  Does the numerator look familiar? Look back at the covariance formula! The top IS covariance!\n\n        1.  The denominator looks familiar too! It is the standard deviation for x and y.\n\n    2.  Correlation is similar to covariance but it is more useful.\n\n        1.  We interpret correlation from -1 to 1.\n\n            1.  -1 represents a perfectly negative correlation\n\n                1.  This will almost never happen\n\n            2.  1 represents a perfectly positive correlation\n\n                1.  this will almost never happen.\n\n        2.  Correlation tell us the direction and strength of a linear relationship between two variables.\n\n2.  Correlation is covariance divided by the product of the two variables standard deviation. So they measure the same thing but one belongs to \\[-1,1\\] and the other (covariance) take any value.\n\n# Section 2: Statistical/Hypothesis Testing\n\nCan we believe this finding? Is this a *real* relationship? Hypothesis testing helps us answer those questions. There are different types of tests we can do. Below are the \"basic\" tests. More complicated models will use these tests in some manner. For example, Ordinary Least Squares (OLS) uses a t-test to help us understand whether the relationship (the beta) is statistically significant.\n\nThese test correspond with a specific distribution a.k.a a probability distribution. A probability distribution TK\n\nWhen we use these tests, we are using their respective probability distributions.\n\n## What is a Test Statistic?\n\nA value that assesses how far the sample result is from what we would expect if the null were true. There are different test statistic values. They vary based on the data we are using. There is a z-score, t-test, F-test, $\\chi^2$ test. The most common for us will be the t-test, which is what we use in regression.\n\n## t-Test\n\n### Probability Distribution:\n\n### Purpose:\n\n### Uses:\n\n## $\\chi^2$ Test\n\n### Purpose:\n\n### Uses:\n\n## Analysis of Variance (ANOVA) Test\n\n### Purpose:\n\n### Uses:\n\n## F-Test\n\n### Purpose:\n\n### Uses:\n\n## p-value\n\nRead very closely! So many people misinterpret this concept!\n\n### Definition:\n\nA p-value is the probability of observing a test statistic value equal to or more extreme than the value you computed if the null were true.\n\nAlternatively, the p-value is the probability of making a type I/II error.\n\n### Purpose:\n\nIf we assume the null hypothesis is true, then we could draw the sampling distribution centered around zero. By specifing the null hypothesis we can invoke the central limit theorem.\n\nP-values help us determine how statistically significant our relationship is. Remember that we are using data we have to tell us about data we do not have.\n\n![](pvalue.png){width=\"684\"}\n\n### Uses:\n\nThe p-value is decided by the researcher. Convention typically sets the p-value at .10 and below. However, .10 is still not ideal, the lower the better.\n\n### Important Notes:\n\nthe p-value does not tell us anything substantive. It simply tells us if something is statistically significant.\n\n# Section 3: Regression Overview/Review\n\nThe big kahuna. There are other methods but regression is perhaps the most important. It is easy to understand, straightforward, and powerful. Your ability to understand it inside and out will make you smarter in every way. You are Tony Stark and regression is your Iron Man suit.\n\n## Assumptions (Scalar Notation)\n\n### Assumption 1: $\\epsilon_i$is normally distributed \n\n1.  This assumption is for the purposes of constructing a hypothesis test. \n2.  We don't need this to estimate our beta. \n3.  But by assuming the errors are normally distributed then we can run a hypothesis test (t-test) to see if we accept or reject the null hypothesis of beta = 0. \n\n### Assumption 2: $E[\\epsilon_i]=0$\n\n1.  The distance between the observed and fitted line is zero. (the residual is zero) \n    1.  This rarely happens **BUT** we estimate our $\\hat{\\beta}$'s so that the error is as close to zero as possible. \n        1.  The goal is to have a line of best fit that does this for all observations. \n\n### Assumption 3: $Var(\\epsilon_i)=\\sigma^2$\n\n1.  This is homoscedasticity (or no heteroskedasticity). \n    1.  We want constant error variance. \n\n    2.  Homoscedasticity visualized:\n\n        ![Homoscedasticity visualized (From Gujarati & Porter)](images/image002.png){width=\"500\"}\n\n### Assumption 4: $Cov(\\epsilon_i,\\epsilon_j)=0 \\:\\forall\\:i \\neq j$\n\n1.  This represents no autocorrelation \n\n2.  The disturbances of i and j are NOT correlated\n\n3.  $\\forall$ means \"for all\"\n\n### Assumption 5: $x_i$ is fixed in repeated sampling\n\n1.  X values are independent fo the error term\n\n### Assumption 6: Sample regression model correctly specified \n\n1.  Our sample regression equation correctly identifies the variables in the theoretical population regression model. \n\n2.  We include all relevant confounding variables. \n\n3.  No omitted variable bias. \n\n### Assumption 7: $Cov(\\epsilon_i,x_i)=0$\n\n1.  covariance between residuals and parameters is equal to zero\n\n### Assumption 8: Parametric Linearity\n\n1.  Linear in the parameters. \n\n2.  We do NOT raise the betas to a power. \n\n    1.  We can raise the variables (x's) to a power and it remains linear. \n\n    2.  Note: Logit models add a \"link function\". This line is not linear but it is still a linear relationship.\n\n### Assumption 9: $x_i$ must vary\n\n1.  Duh. You can't do anything if your X variable doesn't vary.\n\n### Assumption 10: n \\> k\n\n1.  This relates to degrees of freedom.\n2.  We need more operations than we have parameters or else we do not have enough information to test a relationship.\n\n### Assumption 11: No perfect multicollinearity\n\n1.  We wouldn't include a column for male and a column for female because that would be perfect multicollinearity. \n2.  Multicollinearity is not a big issue (it is natural there will be some level of collinearity between our variables). \n    1.  BUT perfect multicollinearity is bad and we do not want it. \n3.  Multicollinearity can (in some cases) disappear as we increase the number of observations.\n4.  This is easy to see in matrix algebra or an excel sheet.\n\n## Assumptions (Matrix Notation)\n\nNote: These assumptions are the EXACT same assumptions listed above. The difference is in notation. Why do we do this? I answer this later, but basically its a different way to write math that is more concise and easier to understand. **We use matrix algebra/notation because as our model gets bigger, scalar notation gets more complicated to read/keep track of.**\n\nWhy do we bold letters? Bold letters represent matrices.\n\n### Assumption 1: Linearity in the parameters\n\n$y_i=x_{i1}\\beta_1+x_{i2}\\beta_2+...+X_{iK}\\beta_K+\\epsilon_i$\n\n1.  The model specifies a linear relationship between y and **X**\n2.  Do not raise the $\\beta$ to a power.\n\n### Assumption 2: Full rank\n\n1.  **X** is an n x K matrix with rank K\n    1.  There is no exact linear relationship among variables \n    2.  Sometimes called the \"identification condition\"\n2.  What is \"rank\"?\n    1.  It is the number of linearly independent columns \n\n        1.  If the number of independent columns is equal to the total number of columns then the matrix is full rank.\n3.  This assumption relates to the scalar assumption of **no perfect multicollinearity.**\n\n### Assumption 3: Exogeneity of the independent variables\n\n1.  The independent variables contain **NO** predictive information about\n\n2.  The expected value of is not a function of the independent variables at any observation (including i):\n\n    1.  $E[\\epsilon_i|x_{j1},x_{j2},...,x_{jK}=0$\n\n        1.  $E[\\epsilon_i|\\textbf{X}]=0$\n\n3.  What does this mean?\n\n    1.  The independent variables are not influenced by the error term or any other unobserved factors in the model.\n\n    2.  The X variable does not depend on the Y variable (reverse causality). We can't have the Y variable influencing our regressors (that would be endogeneity)\n\n### Assumption 4: Spherical disturbances\n\n1.  No autocorrelation\n\n    1.  $E[\\text{Cov}(i,j|\\mathbf{X})] = 0\\: \\forall \\:i=j$\n\n2.  Assumed homoscedasticity\n\n    1.  $E[\\text{Var}(i|\\mathbf{X})] = 2\\: \\forall\\: i=1,2,\\ldots,n$\n\n    2.  Why assumed?\n\n        1.  Some level of heteroscedasticity is not fatal\n\n        2.  We can fix it. But homoscedasticity is always preferable.\n\n3.  These two assumptions can be written mathematically into one single assumption using matrix algebra:\n\n    ![](sphericalpic.png){width=\"347\"}\n\n    1.  The off-diagonal (the zeros) represent autocorrelation\n\n        1.  if these are not zero (or at least very close) we have autocorrelation\n\n    2.  The main-diagonal (the variance) represents our homoscedasticity assumption\n\n        1.  If these values along the main diagonal are not the same or at least very close, then we have heteroscedasticity.\n\n### Assumption 5: Data generation\n\n1.  The data generating process of **X** and $\\epsilon$ are independent.\n\n2.  **X** is generated by a non-stochastic process\n\n3.  this assumption allows us to say \"conditional on X\"\n\n4.  This assumption is a bit confusing to me.\n\n    1.  From my understanding, we want our X values to be fixed. We then take samples to see how our y values vary based on the fixed values of X. \n\n    2.  Let's say you want to predict annual income based on years of experience. Your manager gave you three lists of employees with their annual income. Each list corresponds to a particular experience level --- let's say 3 years, 6 years, and 10 years of experience respectively. Each list contains data on 50 employees. As you can see, the x-values are fixed(3, 6, 10), but have repeated samples (50 data points per sample). This is what is known as Non-stochastic regressors\n\n### Assumption 6: $\\epsilon$ is normally distributed\n\n1.  This is useful for constructing our hypothesis tests and test statistics \n\n2.  Technically, we don't need this for estimating our beta, just uncertainty surrounding it.\n\n## Formula for deriving $\\beta$\n\n-   Problem: We have two missing terms, 𝜷 and 𝛆. Knowing one of these will tell us the line. But since we don't know either of these terms, how do we find it out? \n\n-   We have to solve for beta. Solving for beta in Ordinary Least Squares (OLS) requires us to find a line of best fit that minimizes the unexplained difference (the error). \n\n-   To do this we take the sum of the squared residuals  \n\n    -   It may help to understand this through the formula of the residual. \n\n        -   First the residual is the amount our actual observed value differs from the predicted value (This is in matrix notation). \n\n            -   $(y-\\textbf{X}\\beta_0)$\n\n                -   y is our observed value and the $\\textbf{X}\\beta_0$ is our predicted value (the line of best fit). \n\n            -   WE SQUARE THIS! SO NOW: \n\n                -   $(y-\\textbf{X}\\beta_0)'(y-\\textbf{X}\\beta_0)$\n\n                    -   The (') means transpose. It is matrix notation that allows us to multiply these two matrices (vectors). \n\n                    -   Why do we square? \n\n                        -   We square the residuals for a bunch of reasons. Mainly: if we don't, the residuals (Both positive and negative) cancel out. \n\n                -   Multiplying this through, we get:\n\n                -   $y'y-y'\\textbf{X}\\hat{\\beta_0}'\\textbf{X}'y+\\hat{\\beta_0}'\\textbf{X}'\\textbf{X}$\n\n                -   You collect the terms and simply. \n\n                -   <https://www.youtube.com/watch?v=K_EH2abOp00> see for more\n\n-   SO NOW: we want to find a line $\\hat{\\beta_0}$ such that the derivative (the tangent) is set to 0 aka the minimum, hence LEAST squares. Remember, we do not know the Beta. \n\n    -   We set to zero to find the critical point (the minimum) \n\n    -   Taking the partial derivative with respect to beta, you're essentially finding the point where the error function is not changing with respect to changes in beta. Where the slope of the error function with respect to beta is zero. \n\n    -   ![](beta-1.png){width=\"305\"}\n\n    -   Figure b is a visual representation of what this looks like when we set our minimum. We are finding the tangent line of the function that is equal to zero!\n\n-   The formula is\n\n    -   $\\hat{\\beta}=(\\textbf{X'X})^{-1}\\textbf{X}'y$\n\n        -   this gives us the line of best fit. This is the formula R uses to calculate the beta/line.\n\n-   **Controlling for other variables:**\n\n    -   ![](beta-2.png){width=\"514\"}\n\n    -   Compare figure 3.3 to figure 3.2. They are the same thing. However in 3.3 we have added an additional dimension because of the additional variable. What we are doing remains the same however we now just have more dimensions and we are still trying to find the minimum of that parabola(?) plane(?)\n\n## Controlling for other variables:\n\nA bivariate regression is not a causal model. If we want to know the effect of some variable on Y, then we need to know what other factors might be confounding this relationship. Thus, we move from a bivariate to a multi-variate regression.\n\n### Frisch-Waugh-Lovell (FWL) Theorem\n\nThe FWL theorem can help explain some of the intuition of what is going on when we have a multi-variate regression. Imagine we have some multivariate regression:\n\n$$\nY=β1​X1​+β2​X2​+⋯+βk​Xk​+u\n$$\n\nWe can simply run the full regression, but the FWL states we can get the same coefficient for $\\beta_1$ using the FWL. Again, the FWL is not something you use as an alternative estimation method to regression (you could but that's not the point of it), but it shows the intuition behind what is happening with our main variable and other controls.\n\nThe FWL shows we can derive $\\beta_1$ through three smaller steps:\n\n#### FWL: Step 1\n\nRegress Y on all other X's **except** $X_1$ and collect the residuals. Recall residuals are the difference between our line of best fit (the predicted value) and our actual observation. Basically, how much does our prediction not explain.\n\n$$\nY=β2​X2​+⋯+βk​Xk​+u\n$$\n\nWe run that regression then we take the residuals of that regression:\n\n$$\nY - \\hat{Y} = \\bar{Y}\n$$\n\nThese are the parts of Y **NOT EXPLAINED** by the other controls.\n\n#### FWL: Step 2\n\nRegress $X_1$ on all other X's (except itself) and get the residuals. In other words, run the same regression as above but have $X_1$ as your *dependent variable.*\n\n$$\nX_1=β2​X2​+⋯+βk​Xk​+u\n$$\n\nWe run that regression then we take the residuals of that regression:\n\n$$\nX_1 - \\hat{X_1}=\\bar{X}\n$$\n\nThese are the parts of $X_1$ **NOT EXPLAINED** by the other controls\n\n#### FWL: Step 3\n\nNow have the residuals from both **Step 1** and **Step 2.** We take these residuals and run a regression with them. We have the residuals from step 1: $\\bar{Y}$ and the residuals from step 2: $\\bar{X}$. Thus we run the following regression:\n\n$$\n\\bar{Y}=\\bar{X} +\\bar{\\mu}\n$$\n\nWhen we run this regression, our coefficient for $X_1$ will be the *exact same* as the coefficient in our normal multivariate regression.\n\n#### FWL: Intuition\n\nStep by step, what we just did was:\n\n-   purge Y of the influence of other regressors\n\n-   purge $X_1$ of the influence of other regressors\n\n-   Then we see how those \"cleaned\" up versions of $X_1$ and Y move together.\n\nThis is the partial effect of \\$X_1 on Y aka the multiple regression coefficient.\n\n## Omega Matrix\n\n-   What the hell is an omega matrix $\\Omega$?\n\n    -   The omega matrix is literally 𝛆𝛆' \n\n        -   The error times its transpose.\n\n        -   We obviously can't solve this without knowing what the errors are. \n\n            -   This produces the variance covariance matrix (VCV) AKA covariance matrix of the errors. \n\n-   Why do we care about this matrix? \n\n    -   We need the residuals to get our standard errors. \n\n    -   Additionally, this matrix is used to test our assumptions about the model. Specifically whether our model has autocorrelation and heteroskedasticity. \n\n    -   ![](sphericalpic.png)\n\n    -   This is basically what the omega matrix looks like. This photo however is what we want that omega matrix to look like (ours won't always look like that). But we want the off diagonals to be zero (or effectively zero) and we want the main diagonal to be constant. \n\n        -   If off-diagonal values are \\> 0 \n\n            -   We have autocorrelation\n\n        -   If main-diagonal values are not the same at each value\n\n            -   We have heteroskedasticity. \n\n    -   NOTE: our omega matrix will NEVER be perfectly spherical.\n\n### Conversation with Andy about Omega Matrix:\n\nI emailed Andy about this and figured it might be beneficial to include it here.\n\n***Stone:***\n\n*I am looking back on your \"Roll your own standard errors.r\". I see how the residual maker is part of the variance formula.*\n\n*\\# the formula for s\\^2 is e'e/(n-K)*\n\n*s.2 \\<- (t(e)%\\*%e)/(length(y) - ncol(X))*\n\n*##I ran this code individually and it gave me a scalar. I assume this is the sum of the squared error (SSE)?*\n\n***Andy:***\n\n*Yes, divided by degrees of freedom, so it's a variance*\n\n***Stone:***\n\n*So, autocorrelation and heteroscedasticity manifest through the variance. Then: vcv \\<- s.2\\*(solve(t(X)%\\*%X))*\n\n-   *This is our VCV of the X's and then we take the square root of the diagonal to get our SE.*\n\n*We use the omega (and the assumptions of no spherical errors) to derive the equation for the SE (equation above). However, if we have spherical disturbances and use the same equation to derive our standard errors then our standard errors are wrong.*\n\n***Andy:***\n\n*Yes,if there are non-spherical disturbances than our standard VCV above isn't technically correct anymore b/c the equation doesn't simplify to that.*\n\n***Stone:***\n\n*Then the omega matrix (and its assumptions) is related to the population error. And thus, when we get a sample with spherical disturbances that does not match our expectations of the population error of no spherical disturbances, we then must fix it. Right?*\n\n***Andy:***\n\n*Right...we can't know what the population Omega is, but we can get a good guess based off our sample Omega matrix*\n\n***Stone:***\n\n*So, if we switch the order, e%\\*%t(e) gives us the matrix of errors (WHICH IS NOT THE OMEGA MATRIX(?)). We want our matrix of errors to look like the omega matrix. It never will but we use the various tests to figure out the level of spherical errors that are present in this matrix.*\n\n***Andy:***\n\n*The matrix of the errors IS the Omega matrix, which is the variance covariance matrix of the errors (note the other VCV for our X's above). It'll never be spherical perfectly but our assumptions are about expectations so it just needs to be consistently a problem (e.g., 2 errors can be correlated, but it's only a problem if on average there's a correlation between errors)*\n\n***Stone:***\n\n*Then when we detect spherical disturbances, we purge it or do whatever (FGLS, Robust/cluster SE), which then fixes our variance and then fixes our SE? Do I have all this right? This all feels kind of magical.*\n\n***Andy:***\n\n*If you're running FGLS you're using the info in the residual Omega to adjust both your SE's and coefficients. If you're correcting just your SEs you're basically adjusting the standard SE formula to account for the pattern you want to correct for.*\n\n## Standard Error\n\n1.  Standard Errors are not intuitive to me...but they are important\n\n2.  **Standard error is the standard deviation of the means.** \n\n    1.  The standard error quantifies the variation in the means from multiple sets of measurements. \n\n        1.  What gets often confused is that the standard error can be estimated from a SINGLE set of measurements, even though it describes the means from multiple sets. Thus, even if you only have a single set of measurements, you are often given the option to plot the standard error. \n\n            1.  It is an estimate!\n\n3.  It is worth discussing standard deviation and its formula.\n\n    1.  $\\sigma = \\sqrt{\\frac{\\sum_{i=1}^{N}(x_i - \\mu)^2}{N}}$\n\n        1.  Above is the formula for standard deviation. \n\n            1.  Note: the similarity of this to variance. \n\n4.  Standard error formula is:\n\n    1.  $SE = \\frac{\\sigma}{\\sqrt{n}}$\n\n        1.  The s is the standard deviation! So all that in the standard deviation formula above is IN the standard error formula. \n\n5.  Why are standard errors important? \n\n    1.  Need for precision of our coefficients\n\n        1.  How precise of a claim can we make? \n\n6.  We make assumptions about our standard errors.\\*\\*TK  \n\n    1.  They are normally distributed. \n\n        1.  Not a big deal. \n\n    2.  Assuming the error term is independent and identically distributed. \n\n        1.  Each individual error term follows the same distribution and is uncorrelated with each other.\n\n            1.  Knowing an error term does not tell you anything about another error term.\n\n7.  Autocorrelation/heteroskedasticity do not bias our coefficient. \n\n8.  Presence of autocorrelation leads to an underestimation of the true standard errors. \n\n    1.  Increases the possibility of making a type 1 error. \n\n9.  Standard errors are useful for creating confidence intervals. \n\n## Heteroscedasticity (spherical disturbances)\n\n1.  What is heteroskedasticity? \n    1.  Non-constant error variance. \n\n        1.  See the picture at the beginning of the document of what homoscedasticity looks like. Heteroscedasticity is the opposite of that. \n\n            1.  Think of our errors having a pattern or they \"fan out\"\n\n            2.  Using the omega matrix again, it is when each value along the main diagonal is different. \n2.  THIS AFFECTS OUR STANDARD ERROR! \n    1.  How? \n3.  What does it do to our estimate? \n    1.  Our coefficient is unchanged.\n\n    2.  However the efficiency of our model is influenced. \n\n## Autocorrelation (spherical disturbances)\n\n1.  What is autocorrelation? \n\n2.  THIS AFFECTS OUR STANDARD ERROR! \n\n    1.  How? \n\n## Interactions:\n\nInteractions are used when we believe the relationship is *conditional*. For example, X causes Y, only if Z is active. The effect of X on Y depends on the level of Z. In other words, the effect of one independent variable on the dependent variable is conditioned by another variable.\n\nTo accommodate a relationship such as this one, we multiply the two variables together rather than adding. Goal: deterime whether the function $\\textbf{E}[y|x]$ is constant for different subsamples.\n\n### Interactions increase multicollinearity\n\nTHIS IS OKAY.\n\n### Include all constitutive terms\n\nIt is essential that you include the constitutive terms and the interaction in the model.\n\n**Wrong:** Turnout = Age + Age\\*Race\n\n**Correct:** Turnout = Age + Race + Age\\*Race\n\n### Interpretation\n\nWhen interactions are dichotomous or categorical, interpretation is relatively easy. When the interaction includes a continuous variable, interpretation from the table becomes difficult.\n\n### Interpretation continued\n\nFocusing on individual coefficients for interaction is not advisable. When a model includes interaction terms, the association between the focal predictor and the outcomes is no longer captured by a single coefficient, but rather by a combination of coefficients. See Rohrer & Bundock Models as Prediction Machines: How to Convert Confusing Coefficients into Clear Quantities.\n\n### Example Case\n\nLet's use the example from applied econometrics.\n\n```{r, echo=FALSE, output = FALSE}\nlibrary(haven)\nsetwd(\"~/Stone_Website/notes/Data\")\nnlsy <- read_dta(\"nlsy.dta\")\n\n```\n\nLet's look at the log of wages log(inc95) as our dependent variable and education as our main independent variable. We first restrict our analysis to only females.\n\n```{r}\n# bivariate regression \n\nm1 <- lm(log(inc95) ~ yeared, data = subset(nlsy, female == 1))\nsummary(m1)\n```\n\nWhat does the table tell us? Recall we are only focusing on women!\n\n**Intercept: 8.036830** - This is the average of log earnings of women when years of education is 0.\n\n**yeared: 0.145182** - This is our slope. A one unit increase in years of education increases earnings by 15%.\n\nNow let's run the same regression but only on males.\n\n```{r}\nm2 <- lm(log(inc95) ~ yeared, data = subset(nlsy, female == 0))\nsummary(m2)\n```\n\nWhat does the table tell us? Recall we are only focusing on men!\n\n**Intercept: 8.628191 -** This is the average of log earnings of men when years of education is 0.\n\n**yeared: 0.128389** - This is our slope. A one unit increase in years of education increases earnings by 13%.\n\nWhat is the point of these simple regressions? This becomes clear once we actually run an interaction. In this conception, our question becomes: Is the effect of education on wages, conditional on gender? We just showed that there are different estimates and intercepts for each. But what we don't know is that if they are *statistically different* from each other.\n\n```{r}\nm3 <- lm(log(inc95) ~ yeared*female, data = nlsy)\nsummary(m3)\n```\n\nLet's look at this carefully. You may see some numbers that look familiar!\n\n**Intercept: 8.628191** - This the average of log wages when education is 0 ***for MALES.***\n\n**yeared: .128389** - a one year increase in education results in a 13% change in wages, ***for MALES.***\n\n**female: -0.591361** - now hold on, this is a new number. Actually, it isn't. Add the intercept (8.628191) to the coefficient of female (-.591361). What do you get? You get $8.03683$! That should look familiar because it is the intercept we estimated when we just ran the simple bivariate regression when the data was subset to only female. At `yeared = 0`, women earn **0.591 log points less than men**.\n\n**yeared:female: 0.016793** - While it is a new number, it actually isn't. This tells us how much the slope differs for female. The slope for male is yeared = .128389. For women, the slope is the male slope plus .016793. What does that equal? .128 + .017 = .145. Is the coefficient of .145 look familiar? It should, because that is exactly the slope coefficient we estimated in m1 earlier.\n\nBut interactions aren't special for these reasons, they are special because they quantify whether these effects are different for each subsample. Of course, the coefficients are both different but we need to know if they are *statistically different.* Based off the interaction term, we see a low t-score and a high p-value, indicating that we fail to reject the null hypothesis that the effect of education on wages is the same for male and female. However, even if we have significance, it is important to plot it. Just looking at the table will not tell us *where* the slopes are statistically different from each other.\n\n# Section 4: Basic Questions You Are Too Afraid To Ask\n\n## What are moments?\n\nMoments describe the probability distribution. Think of the shape of the density plot. Technically, two unique distributions could have the same mean or median. However, we need moments to help us better understand the distribution shape.\n\n### Mean\n\n$$\n\\bar{x} = \\frac{\\sum_{i=1}^{n} x_i}{n}\n$$\n\n### Median\n\nasdf\n\n### Mode\n\nfdsaf\n\n### Kurtosis\n\nsadf\n\n## Why do we use matrix algebra? Scalar notation seems fine...\n\nThere are a lot of reasons. In relation to regression, matrix algebra becomes essential because doing this in scalar notation turns into hell. It is simply too hard to do all of that once you get more and more variables. \n\nSecondly, it is how R and other coding languages calculate the coefficient. Why? Long story short, it is less taxing on your computer to do these calculations. Besides more computer sciencey explanations, your computer is doing matrix algebra all the time. \n\nFinally, matrix algebra will be used in further methods classes. This is especially important in machine learning. You are working with an array now but in machine learning, those arrays gain more dimensions. Imagine a matrix stacked upon another matrix and another. These are called tensors. Don't worry, you don't have to deal with these, ever...unless you want to. TK\n\n## What is the difference between covariance and correlation?\n\nCorrelation is covariance divided by the product of the two variables standard deviation. So they measure the same thing but correlation gives an output bounded to \\[-1,1\\] and the covariance takes on the same value as the constitutive terms.\n\nCorrelation is a normalization of covariance. Covariance is hard to interpret because the scale depends on the variances of two inputs. If you see a covariance of 11,350 or 2,489, you don't know what those mean or even which set of variables have a high correlation. Correlation divides variance out and rescales to the interval \\[-1, 1\\], so now you can make those comparisons. Correlation is covariance but has greater readability and usefulness.\n\n## What do dummy variables do to the line? Why don't they change the slope? How come they only shift the intercept?\n\nA dummy variable is a variable coded in binary (0 or 1). Dummy variables can be a factor (0, 1, 2, 3, etc.)\n\n## What is the difference between variance and standard deviation?\n\n## Why is Ordinary Least Squares (OLS) so powerful?\n\nThe power of OLS becomes somewhat clearer as you learn about different methods. OLS is powerful because it is extremely easy to interpret. The interpretation of OLS is easy because we are specifying a linear relationship.\n\nOLS power comes from the popularly known Gauss-Markov assumptions. If these assumptions are met, OLS is BLUE - Best Unbiased Linear Estimator.\n\nDespite its power, OLS has shortfalls. However, it is still important to know OLS, as many methods serve as *extensions* of OLS and adapt it to better fit the data.\n\n## When is OLS not good? Why use other ones?\n\nOLS has numerous advantages. However, OLS has shortfalls that other methods can fix/correct.\n\n1.  OLS is not good with a categorical dependent variable.\n\n## Mediator versus Moderator\n\n### Mediator:\n\nA mediator explains how an independent variable predicts an outcome, outlining the causal mechanism. A mediator tells us why or how something works.\n\n### Moderator:\n\nA moderator variable changes the strength or direction of a relationship between two variables. Moderators tell us when or for whom something works. Influences the *strength* of a relationship. The built environment is a moderator for how people interact, it influences the nature and strength of interaction. But it does not explain how people interact.\n\n## How is standard error difference from standard deviation?\n\n-   <https://www.youtube.com/watch?v=A82brFpdr9g>\n    -   Watch the video.\n-   Standard deviation quantifies the variation within a set of measurements. Standard error quantifies the variation in the MEANS from multiple sets of measurements.\n-   This gets confusing because we can estimate standard error off of one measurement. \n-   Watch the video. Seriously, just watch the damn video.\n\n## Are the assumptions about regression related to the sample or population?\n\n-   This was originally a question on Andy's midterm. I got it wrong. :(\n\n-   The assumptions relate to the population.\n\n    -   We test these assumptions using our sample.\n\n    -   We use samples to tell us what we think the true (population) relationship is.\n\n        -   Using data we have to tell us about data we do not have.\n\n## Why is it called Ordinary Least Squares (OLS)?\n\n## What is variance and why is it important?\n\n$$\n\\text{Variance} (s^2) = \\frac{\\sum_{i=1}^{n} (x_i - \\bar{x})^2}{n-1}\n$$\n\nVariance is a measure of spread. Variance helps us understand the *dispersion* or *variability* in a data set. Variance estimates how far a set of numbers are spread out from the mean value. It can be difficult to interpret based on the output alone. This is because these values are squared, so we can't really tell based on the number alone whether the value is relatively high or low.\n\nUnderstanding variance is critical in statistics. Variance is integral to the efficiency of our estimators. That is, how accurate our model is.\n\n## Why do we care so much about standard errors?\n\n## I am having trouble visualizing OLS with many variables. What do I do?\n\nNot much. We are pretty limited to understanding things in three dimensions. Imagine you have 8 variables in your OLS model. Try to draw an 8 dimensional model that shows the relationship. It is impossible.\n\n## Instrumental variables, what are they? Will I use them? Should I use them?\n\nInstrumental variables are somewhat rare and frowned upon (?) in political science. To be a good instrumental variable, instrumental variables must satisfy two conditions:\n\n1.  The instrumental variable is theoretically relevant to x.\n\n2.  The instrumental variable must satisfy the exclusion restriction.\n\nThe first point requires that our instrument (z) must be endogenous to our independent variable (x)\n\nThe exclusion restriction is typically where instrumental variables get attacked. The instrumental variable (*z* in this case) must only affect X. Z-\\> X -\\> Y. The difficulty to this condition is that there is no statistical test. The exclusion restriction must be defended by theory.\n\nIt is very difficult to find an instrument that is both related to X and does not affect Y. An example of a good instrument is provided below (thank you ChrisP from StackExchange):\n\n*\"For example, suppose we want to estimate the effect of police (*𝑥*) on crime (*𝑦*) in a cross-section of cities. One issue is that places with lots of crime will hire more police. We therefore seek an instrument* 𝑧*𝑧 that is correlated with the size of the police force, but unrelated to crime.*\n\n*One possible* 𝑧 *is number of firefighters. The assumptions are that cities with lots of firefighters also have large police forces (relevance) and that firefighters do not affect crime (exclusion). Relevance can be checked with the reduced form regressions, but whether firefighters also affect crime is something to be argued for. Theoretically, they do not and are therefore a valid instrument.\"*\n\n### Why should we use an instrumental variable?\n\nThe need for an instrumental variable arises when we are concerned for confounding variables or measurement error.\n\nMost of the time these suck. You need to defend them rigorously with theory and even then are hard. Rainfall is one that is used in many cases with success. If asked to use one, the classic rainfall instrumental variable might work.\n\n## Should we care about $R^2$?\n\nIt depends on your question. Chances are you want to find some variable (X) that causes another variable (Y). In this instance, your $R^2$ is mostly irrelevant. You want to see whether that X variable is statistically having an effect on your Y variable. For example, my data 1 project was on the relationship between walkability and voter turnout. I wanted to see if the walkability of an area had an impact on voter turnout in 2016, 2018, and 2020 general elections. Once I accounted for confounding variables, all I cared about was the significance of my variable of interest (walkability). $R^2$ told me nothing that helped me answer this question. \n\nHowever, R\\^2 is very important for questions surrounding prediction. TK\n\nAlso we should focus on adjusted R\\^2\n\nWe are in the business of beta hats not y hats.\n\n## Everyone talks about endogeneity. What is it?!\n\nEndogeneity is when the error term is correlated with the X. Remember that the error term contains everything **not** in our model (everything that determines Y but is NOT X, will be in our error term). If any of those things **not** in our model (the error) are related to our X and affect Y, then we have endogeneity. Endogeneity relates to confounders.\n\nEndogeneity leads to bias in our coefficient.\n\n## What is orthogonal?\n\nThis concept was always a bit confusing as it can have different meaning in different contexts.\n\nORTHOGONAL MEANS INDEPENDENT\n\nSimply put, orthogonality means \"uncorrelated\". An orthogonal model means that all independent variables in that model are uncorrelated. If one or more independent variables are correlated, then that model is **non-orthogonal (**statisticshowto.com)\n\n## Is OLS a causal Inference model?\n\n## Why do we use the normal distribution?\n\n# Section 7: Interpretation Deep Dive\n\n### Example\n\n```{r}\n\n```\n\n## Interpreting Control Variables\n\nOur model, of whatever specification, will likely include numerous control variables. Each of these variables included will have their own coefficient estimated. Of course, we have our main IV, but should we bother to interpret the other variables in our model? No. This is known as the \"Table 2 fallacy\".\n\n# Section 8: Thinking Deeper\n\n## Unbiased Inferences\n\n\"If we apply a method of inference again and again, we will get estimates that are sometimes too small. Across a large number of applications, do we get the right answer *on average*? If yes, then this method, or estimator, is said to be ***unbiased.***\" - KKV\n\nBias occurs when there is a systematic error in the measure that shifts the estimate more in on e direction than another over a set of replications. Note there is *statistical bias* and *substantive bias.*\n\nAn estimator of $\\mu$ is said to be unbiased if it equals $\\mu$ on average over many hypothetical replications of the same experiment.\n\n## Efficiency\n\nWe generally only get to estimate once. We want confidence that the one estimate we get is close to the right one.\n\nEfficiency is measured by calculating the variance of the estimator across hypothetical replications. For unbiased estimators, the smaller the variance, the more efficient (the better) the estimator.\n\n## Bias vs. Efficiency\n\nIt is a tradeoff!\n\n# Section 9: Causal Inference\n\n## Readings Associated:\n\n1.  Keele, Luke. 2015. \"The Statistics of Causal Inference: A View from Political Methodology.\" Political Analysis 23(3): 313--335\n2.  \n\n## What is Causal Inference?\n\nCausality refers to the relational concept where on set of events causes another. Causal inference is the process by which we make claims about causal relationships. Testing causality is done under the counterfactual model, that is, causation is defined in terms of observable and unobservable events.\n\nWhy should we are about the counterfactual model and how is this different from statistics broadly?\n\n1.  the counterfactual approach has provided new insights in the assumptions needed for data to be informative about causality.\n2.  a renewed emphasis on research design and design-based approach.\n\n## The Fundamental Problem of Causal Inference\n\nIt is actually very difficult to say on thing actually caused another. Why? Because we can never observe the real counterfactual. We live in one universe. You cannot observe someone taking both the treatment and placebo pill. You only see the universe in which they took one or the other.\n\n## Components of Causal Inference\n\n### Identification\n\nWe say a parameter in a model is identified if it is theoretically possible to learn the true value of that parameter with an infinite number of observations. We seek to describe the *conclusions* that can be drawn with an infinite sample. Inference requires two components: identification and statistical. Studies of statistical inference on the other hand focus on what can be learned with finite samples. The causal identification step is important to see if it's possible to estimate the effect of *Treatment* on *Outcome*.\n\n#### Estimands\n\nWhat is an estimand? You can think of them as an inquiry. However, the inquiry is the function that operates on events generated by the real world or a simulated world. The estimand is the value of that function. We use \"inquiry\" to refer to the question and \"estimand\" to refer to the answer to the question.\n\nAverage Treatment Effect (ATE): $ATE=\\mathbb{E}[Y_{i1} -Y_{i0}]$\n\n-   The ATE is the average difference in the pair of potential outcomes average over the entire population of interest.\n\nAverage Treatment Effect of the Treated (ATT): $ATT=\\mathbb{E}[Y_{i1} -Y_{i0} |D_i=1]$\n\n-   The ATE defined for the subpopulation exposed to the treatment\n\n    -   We might average over subpopulations defined by pretreatment covariates such as sex and estimate the ATE for females only = ATT.\n\n#### Threats to Identification\n\nConfounding due to a common cause\n\nConfounding due to a common effect\n\n#### Assumptions\n\n1.  Assumption of independence between treatment and potential outcomes.\n2.  The stable unit treatment value assumption (SUTVA) - Rubin 1986\n    1.  there are no hidden forms of treatment, which implies that for for unit $i$ under $D_i=d$, we assume that $Y_{id}=Y_i$\n        1.  AKA the consistency assumption\n    2.  a subject's potential outcome is not affected by other subjects' exposure to the treatment.\n        1.  This is a big problem and must be avoided - think of it as contamination. Your no longer looking at treated vs. control but now between a treated unit and partially treated unit.\n            1.  if we have no knowledge of these spillovers, causal parameters cannot be identified.\n\n## Identification Strategies\n\nA research design intended to solve the causal inference identification problem (Angrist and Pischke 2010). To ask what is your identification strategy IS to ask what research design (and assumptions) one intends to use for the indemnification of a causal effect.\n\n#### Random Experiments\n\nRandomize recipients of treatment. The typical estimand is the ATE (equivalent in this to the ATT).\n\n-   Critical strength of experiments is that the researcher has the ability to impose independence between treatment status and potential outcomes on a set of units because they can impose a particular type of assignment process.\n\n    -   The researcher can assert that the treated and control groups will be identical in all respects, observable and unobserervable. EXCEPT for who got the treatment which is known.\n\n## Randomization\n\nRandomization eliminates selection bias.\n\n#### Natural Experiments\n\n#### Instrumental Variables\n\n#### Regression Discontinuity Designs\n\n#### Selection on Observables\n\n#### Selection on Observables with Temporal Data\n\n#### Partial Identification\n\n#### Mediation Analysis\n\n#### Reasoning About Assumptions\n\n## Is OLS A Causal Inference Model?\n\nIt can be, but hinges important on the Conditional Independence Assumption (CIA). The CIA assumes that treatment status is independent of both potential outcomes. If you can argue, controlling for all these other variables, that the treatment is assigned as if random (like in an RCT), then you can argue that you do not have selection bias (or OVB) and your OLS estimate is a causal effect.\n\n### Defending your OLS as a causal\n\n-   Be clear on what is not a threat.\n\n-   At least sign the bias on remaining threats.\n\n# Section 9.5: Likelihood\n\nThe principle of maximum likelihood is based on the idea that the observed data (even if it is not a random sample) are more likely to have come about as a result of a particular set of parameters. Thus, we flip the problem on its head. *Rather than consider the data as random and the parameters as fixed, the principle of maximum likelihood treats the observed data as fixed and asks: \"What parameter values are most likely to have generated the data?\"* Thus, the parameters are random variables @ward2018maximum.\n\n-   TK - I think it helps to explain what we mean by parameters....\n\n    -   parameters ARE RANDOM VARIABLES!\n\n        -   mean, variance, coefficients, etc\n\n        -   the\n\n*Likelihood* can be thought of as the join probability of the data as a function of parameter values for a particular density or mass function.\n\nThe key innovation in the likelihood framework is treating the observed data as fixed and asking what combination of probability model and parameter values are the most likely to have generated these specific data.\n\nlikelihood is the product of probability distributions, evaluated at each of our observed data points. When we select a model, we have to choose a convenient distribution for our data. Convenenient distribution in this case refers to a a parametric probability distribution.\n\n**In Maximum likelihood, we specify our distrubtion based on the type of data and then we are estimating that distribution's respective parameters. Each distribution, whether poisson, bernoulli, normal, etc. will have some parameter that describes the shape of distribution.**\n\n-   $\\theta=$ \"the set of parameters\" that define your chosen distribution.\n\n-   Example: in a Normal model, $\\theta=(\\mu, \\sigma^2)$\n\n-   In MLE, you find the $\\theta$ that maximizes how likely your data are under that distribution.\n\n    -   thus, this hinges on us specifying the stochastic component correctly.\n\nI dont really understand the iid.\n\n## Why do we need maximum likelihood?\n\nWe use it anytime our dependent variables has a distribution that was not generated by a Gaussian (normal) process. We are trying to estimate the $\\theta$ (parameter) values based on the data we have been given.\n\n## The Basic Structure of MLE\n\n### Stochastic component\n\nStochastic component: $Y_i\\sim f(\\theta_i)$\n\nHere, $f$ is some probability distribution or mass function. These can be Gaussian, binomial, Poisson, Weibull, etc. The stochastic statement describes our assumptions about the probability distributions that govern our data-generating process. The outcome needs to come from an exponential family.\n\n-   What does the theory tell us about the underlying PDF?\n\n-   What do the realized values, $y_i$, tell us? (using histograms, summary stats...)\n\n-   Is your random variable discrete or continuous?\n\n-   Basically: know what type of data you are working with! Is this count, discrete, continuous, time till failure?\n\n-   The most common exponential families in GLM:\n\n    -   Normal\n\n    -   Binomial\n\n    -   Poisson\n\n    -   Gamma\n\n    -   Bernoulli\n\n    -   Multinomial\n\n    -   Negative Binomial\n\n    -   many more...\n\n### Systematic component\n\nSystematic component: $\\theta_i = \\beta_0+ \\beta_1x_i$\n\nThe systematic statement describes our model for the parameters of the assumed probability distribution. We characterize the systematic components by creating a vector of explanatory variables that are linear in the predictors...these are just our normal betas setup in regression. These are the factors that affect the conditional mean of $Y_i, \\mu$.\n\n### The third component (link function)\n\nThe third component which is somewhat of an afterthought compared the the previous two, is the \"link function\". The link function literally *links* the random component with the systematic component.\n\n## Difference between MLE and OLS?\n\nThey are equivalent, and the OLS estimator can be derived under weaker assumptions. But the OLS approach assumes a linear model and unbounded, continuous outcome. The linear model is a good one, but the world around can be both nonlinear and bounded. The ML approach permits us to specify nonlinear models quite easily if warranted by either our theory or data. The flexibility to model categorical and vounded variables is a benefit of the maximum likelihood approach.\n\n# Section 10: Generalized Linear Models (GLM)\n\nGLMS have three components:\n\n-   Random component: This specifies the response variable y and its probability distribution.\n\n-   Linear predictor: Xb\n\n-   link function: this a function g applied to each component of E(y) that relates\n\n    -   the link function connects the random component with the linear predictor.\n\n## Linear Regression\n\nLinear regression is a type of generalized linear model.\n\n**What are the advantages of the MLE approach in the case of ordinary least squares?**\n\n-   none, they are equivalent, and the OLS estimator can be derived under weaker assumptions. But the OLS approach assumes a linear model and unbounded, continuous outcome. @agresti2015foundations\n\nThe maximum likelihood approach permits us to specify nonlinear models quite easily if warranted by either our theory or data. The flexibility to model categorical and bounded variables is a benefit of the maximum likelihood approach.\n\ndo we still estimate the betas the same though?\n\n## Logit\n\nModels the probability of an event. Dependent variable is binary (0 or 1). The logit is a cumulative density function -it can be thought of as a distribution.\n\n### Link Function:\n\n$$\nf(x) = \\frac{1}{1+e^{-X_i\\beta}}\n$$\n\n### Logit Interpretation\n\nThe output from the logit is the log odds value. Literally an odds ratio logged.\n\n#### Odds Ratio\n\nWhat is an odds ratio?\n\n$$\nOdds = \\frac{Probability \\ Event \\ Occurs\\ (p)}{ Probability \\ Event \\ Does \\ Not\\ Occur \\ (1-p)}\n$$\n\n#### Logit Limitations\n\n-   In small samples, ML estimates of logit model coefficients have substantial bias away from zero @rainey2021estimating\n\n    -   you can use a penalized maximum likelihood to fix this issue.\n\n### Can We Just Use OLS?\n\n-   You could. In fact, many (mostly economists) argue that this is economical and won't be too much different.\n\n    -   Linear interpretations of betas\n\n    -   simple\n\n    -   Works well if $X_i$ is also distributed Bernoulli\n\n-   Problems:\n\n    -   impossible predictions\n\n    -   TK\n\n## Probit\n\n### Probit Interpretation\n\n# Section 11: Model Selection\n\nThis section is intended for application purposes. What model do we used based on our data and application purpose? The bulk of this decision is driven by the structure of our data, specifically the dependent variable.\n\n![Source: @agresti2015foundations](model_selection.jpg){fig-align=\"center\"}\n\n## Ordinary Least Squares (OLS)\n\n## 2 Stage Least Squares\n\n## Logit\n\n## Probit\n\n## Negative Binomial\n\n## Poisson\n\n## Multinomial Logit\n\n## Ordinal Logit\n\n# Section X: Bias\n\n## What is Bias?\n\nBias is\n\n## Where does bias show up?\n\nBias relates to our coefficients ($\\beta$)'s!\n\n## Types of Bias:\n\n### Selection Bias\n\nAs social scientists, we are interested in making causal arguments, our X causes variation in Y. In reality, when we use data, we have some variable of interest and a list of theorized control variables. We can think of our variable of interest as *the treatment*. However, we are not assigning our treatment randomly; there are likely specific (or latent) factors of a person that may influence their likelihood to receive the treatment. In this case, our treatment is not randomly assigned.\n\nLet's use an example from my own study. I am interested in the effects of a walkable environment on voting turnout. I wan't to make the case that living in a walkable area *causes* people to vote more. However, I cannot randomly assign people to live in walkable or non-walkable areas. People can *self-select* (for the most part) where they want to live. I have data on people's voting history and where they live. I decide to a run a regression with voter turnout as my DV and the walkability of where they live as my IV, with an assortment of related control variables. I find a positive association, thus, living in a walkable area *causes* people to turnout to vote at a higher rate, right? No, what I have described is textbook selection bias occurring. My treatment (walkability of an area) is **not** randomly assigned. People can move for a variety of reasons. Maybe there is something about people wanting to live in a walkable environment (self-selecting) and being more likely to vote. Thus our estimate we derived earlier is biased as it does not account for people self-selecting into the treatment.\n\n**To make a causal argument, we need to make sure that our potential outcomes are independent of the treatment status so that we can argue that we have no selection bias (this is the CIA). Randomization ensures the treatment status is independent of our observation's untreated outcomes.** This is possible in a randomized control trial (RCT), but when we can't do an RCT, we rely on our data. If we can argue that our treatment assignment is independent of our variables, then we can make a causal argument.\n\n### Omitted Variable Bias (OVB)\n\nRemember that we are trying to estimate the effect of some X on Y. However, if we do a simple regression, and say this is the effect of X on Y, then we are likely engaging in an OVB. Basically, OVB occurs when you are missing an important control variable. Your regression is *mis-specified.*\n\nOVB biases our coefficient on a number line. It is always positive or negative.\n\n#### Signing the bias\n\n|             |                   |                   |\n|-------------|-------------------|-------------------|\n|             | $Corr(x_1,x_2)>0$ | $Corr(x_1,x_2)<0$ |\n| $\\beta_2>0$ | positive bias     | negative bias     |\n| $\\beta_2<0$ | negative bias     | positive bias     |\n\n: Signing the Bias Table\n\nThis table helps to understand what variables you should control for. Just because a variable influences our dependent variable, does ***not*** mean you need to control for it. If that were the case, we would need to basically include a million variables. We only need to control when that variable influences our DV ***AND*** correlates with our main independent variable of interest. In simple terms, OVB is just not including the right control variables which causes a mis-specification of our regression.\n\nThe direction tells us how our OVB is influencing our coefficient between our main independent variable and our DV.\n\n# Section X: Bias v. Inefficiency Tradeoff\n\n# Section X: What influences our Standard Errors?\n\n# Section X: Panel Data\n","srcMarkdownNoYaml":"\n\n# Preface\n\nThese notes were compiled in my first year of graduate school. These two classes cover simple to complex linear regression. Additionally, some other methods are discussed such as Logit/Probit, Causal Inference, and time-series. These other methods were only discussed in brief and require their own separate set of notes.\n\nReminder: These are notes and do not encompass every idea or detail associated with the concepts. They do not (and cannot) replace classes or reading the material.\n\n# Section 1: Descriptive Statistics\n\nWhile simple, it is critical you understand these. It is okay if you forget (and you will), just remember to keep reviewing. It helps to walk through the formula step by step. I have provided some commentary on the rationale behind the formula in the sections below.\n\nYou should always include descriptive statistics because it convinces your audience that they care. And it provides a guide to interpreting later analysis.\n\n## Mean (Average)\n\n$$\n\\bar{x} = \\frac{\\sum_{i=1}^{n} x_i}{n}\n$$\n\nAbove is the formula for mean (average).\n\n## Median\n\n$$\n\\text{Median} = \\begin{cases}       x_{\\frac{n+1}{2}} & \\text{if } n \\text{ is odd} \\\\      \\frac{1}{2}(x_{\\frac{n}{2}} + x_{\\frac{n}{2} + 1}) & \\text{if } n \\text{ is even}    \\end{cases}\n$$\n\nDon't worry about knowing this formula. Arrange everything in order. Select the middle number.\n\n## Mode\n\n1.  Another measure of central tendency\n\n    1.  Mode is simply what number appears the most in our dataset.\n\n        1.  {4,7,3,7,8,1,7,8,9,4,7}\n\n            1.  Our mode would be 7\n\n                1.  It appears the most.\n\n2.  We don't use mode that much as a measure of central tendency but it still provides some information about the distribution.\n\n3.  Don't worry about the formula\n\n## Variance\n\n$$\n\\text{Variance} (s^2) = \\frac{\\sum_{i=1}^{n} (x_i - \\bar{x})^2}{n-1}\n$$\n\n1.  The average of the squared differences from the Mean. \n\n2.  Variance is a measure of SPREAD.\n\n3.  Let's walk through the formula step by step.\n\n    1.  The $\\Sigma$ means to sum all the values together.\n\n    2.  $(x_i - \\bar{x})$\n\n        1.  in this part we are taking each observation and subtracting it by the mean (average).\n\n        2.  Now lets add the square term. $(x_i - \\bar{x})^2$\n\n            1.  Why do we square this?\n\n                1.  Imagine a number line from 0 to 100. We have some dataset where the mean is 50. Now let's say one of our observations is 38. 38-50 = -12. See what happens!? We have a negative number. All observations to the left of our mean are negative while all observations to the right of our mean are positive.\n\n                    1.  When we add these all up without the square term, we get ZERO!\n\n                2.  Thus we square to accommodate for these canceling out.\n\n                    1.  There are other reasons we square but they aren't relevant here and this is the main reason.\n\n        3.  Now the $n-1$\n\n            1.  N represents the number of observations.\n\n                1.  Why are we subtracting it by 1?\n\n                    1.  If we were calculating the population variance, then we wouldn't subtract by 1. However, we are pretty much never working with the population. We are always using some samples. \n\n                    2.  This part is not super intuitive. BUT, we are using the sample mean, NOT the population mean to calculate the variance.\n\n                        1.  We don't know what the \"true\" population mean is. We have an estimate of it using our sample. Thus, there is some uncertainty around the sample mean (we don't know if the sample mean is = to the population mean). To account for this uncertainty we add a -1 to our denominator. \n\n                            1.  By subtracting 1 from the denominator this makes the spread a little larger to account for that uncertainty. Think about what happens when we make our denominator smaller compared to if we don't. Example:\n\n                                1.  $\\frac{16}{4-1}$ vs. $\\frac{16}{4}$\n\n                                    1.  the one with the $4-1$ denominator will have a larger output and thus account for the uncertainty in our measurement.\n\n## Standard Deviation\n\n$$\n\\text{Sample Standard Deviation} (s) = \\sqrt{\\frac{\\sum_{i=1}^{n} (x_i - \\bar{x})^2}{n-1}}\n$$\n\n1.  Standard deviation is denoted by $s$ or $\\sigma$ (lower case sigma).\n\n2.  Standard deviation represents how far the numbers are from each other.\n\n    1.  Look how similar this equation is compared to the variance equation.\n\n        1.  The standard deviation is the square root of the variance!\n\n3.  I won't explain the whole formula again.\n\n    1.  I will explain why we square root the equation\n\n        1.  We take the square root to put the output back into its original units. Our output is in the same units as the mean.\n\n4.  Have a good understanding of standard deviation THEN understand standard error.\n\n## Standard Error\n\n$$\n\\text{Standard Error} (\\text{SE}) = \\frac{s}{\\sqrt{n}}\n$$\n\n1.  The numerator (s) is standard deviation!\n\n2.  What is standard error?\n\n    1.  It is the standard deviation of the means!\n\n3.  OK, so what is the difference between standard deviation and standard error?\n\n    1.  Standard deviation quantifies the variation within a **set** of measurements. (singular)\n\n    2.  Standard error quantifies the variation in the means from **multiple** sets of measurements. (multiple)\n\n        1.  What is confusing is that we can get standard error from one single measurement, even though it describes the means from multiple sets. **Thus, even if you only have a single set of measurements, you are often given the option to plot the standard error.**\n\n            1.  Just watch the damn video.\n\n                1.  <https://www.youtube.com/watch?v=A82brFpdr9g>\n\n4.  Why do we take the square root of observations in the denominator? \n\n    1.  By dividing by the square root of the sample size, we're essentially adjusting for the fact that the standard deviation of the sampling distribution of the mean tends to decrease as the sample size increases. This is due to the Central Limit Theorem, which states that the sampling distribution of the sample mean becomes approximately normal as the sample size increases, with a mean equal to the population mean and a standard deviation equal to the population standard deviation divided by the square root of the sample size. (chat gpt gave me this and it is a kick ass explanation)\n\n        1.  It is because of this that standard error gets smaller when we have more observations! \n\n## Skewness\n\nYou do not need to know the formula. You just need to know what skewness looks like and how to properly identify when your data is skewed.\n\nWhen our distribution has no skew, the mean, median, and mode are all the same value.\n\n![Skewness Visualized](skewness.jpeg)\n\nPositive skewness is also called \"right skew\". Notice where the mean/median/mode are.\n\nNegative skewness is also called \"left skew\". Notice where the mean/median/mode are.\n\n## Covariance\n\n$$\n\\text{Covariance} (\\text{cov}(X, Y)) = \\frac{\\sum_{i=1}^{n} (x_i - \\bar{x})(y_i - \\bar{y})}{n-1}\n$$\n\n1.  A measure of how much two random variables vary together\n\n    1.  Similar to variance BUT covariance deals with two variables.\n\n2.  Let's walk through the formula.\n\n    1.  The numerator tells us to take the sum of each observation minus its mean for both variables (x and y). Then multiply. \n\n        1.  Remember we divide by N-1 because we are using the sample means and not the population means. Thus we have a bit of uncertainty. By subtracting 1, it makes our denominator smaller and subsequently the output larger, representing the greater uncertainty. \n\n3.  The output of covariance is a number that tells us the **direction** of how these two variables vary together. \n\n    1.  It does not tell us the strength of the relationship between the two variables. \n\n4.  Look how similar this formula is compared to the variance formula! \n\n5.  Covariance is influenced by the scale of the variables. \n\n    2.  Meaning its hard to read/understand by itself.\n\n## Correlation\n\n$$\nr = \\frac{\\sum_{i=1}^{n} (x_i - \\bar{x})(y_i - \\bar{y})}{\\sqrt{\\sum_{i=1}^{n} (x_i - \\bar{x})^2} \\cdot \\sqrt{\\sum_{i=1}^{n} (y_i - \\bar{y})^2}}\n$$\n\n1.  This formula looks scary! It actually is super simple!\n\n    1.  Does the numerator look familiar? Look back at the covariance formula! The top IS covariance!\n\n        1.  The denominator looks familiar too! It is the standard deviation for x and y.\n\n    2.  Correlation is similar to covariance but it is more useful.\n\n        1.  We interpret correlation from -1 to 1.\n\n            1.  -1 represents a perfectly negative correlation\n\n                1.  This will almost never happen\n\n            2.  1 represents a perfectly positive correlation\n\n                1.  this will almost never happen.\n\n        2.  Correlation tell us the direction and strength of a linear relationship between two variables.\n\n2.  Correlation is covariance divided by the product of the two variables standard deviation. So they measure the same thing but one belongs to \\[-1,1\\] and the other (covariance) take any value.\n\n# Section 2: Statistical/Hypothesis Testing\n\nCan we believe this finding? Is this a *real* relationship? Hypothesis testing helps us answer those questions. There are different types of tests we can do. Below are the \"basic\" tests. More complicated models will use these tests in some manner. For example, Ordinary Least Squares (OLS) uses a t-test to help us understand whether the relationship (the beta) is statistically significant.\n\nThese test correspond with a specific distribution a.k.a a probability distribution. A probability distribution TK\n\nWhen we use these tests, we are using their respective probability distributions.\n\n## What is a Test Statistic?\n\nA value that assesses how far the sample result is from what we would expect if the null were true. There are different test statistic values. They vary based on the data we are using. There is a z-score, t-test, F-test, $\\chi^2$ test. The most common for us will be the t-test, which is what we use in regression.\n\n## t-Test\n\n### Probability Distribution:\n\n### Purpose:\n\n### Uses:\n\n## $\\chi^2$ Test\n\n### Purpose:\n\n### Uses:\n\n## Analysis of Variance (ANOVA) Test\n\n### Purpose:\n\n### Uses:\n\n## F-Test\n\n### Purpose:\n\n### Uses:\n\n## p-value\n\nRead very closely! So many people misinterpret this concept!\n\n### Definition:\n\nA p-value is the probability of observing a test statistic value equal to or more extreme than the value you computed if the null were true.\n\nAlternatively, the p-value is the probability of making a type I/II error.\n\n### Purpose:\n\nIf we assume the null hypothesis is true, then we could draw the sampling distribution centered around zero. By specifing the null hypothesis we can invoke the central limit theorem.\n\nP-values help us determine how statistically significant our relationship is. Remember that we are using data we have to tell us about data we do not have.\n\n![](pvalue.png){width=\"684\"}\n\n### Uses:\n\nThe p-value is decided by the researcher. Convention typically sets the p-value at .10 and below. However, .10 is still not ideal, the lower the better.\n\n### Important Notes:\n\nthe p-value does not tell us anything substantive. It simply tells us if something is statistically significant.\n\n# Section 3: Regression Overview/Review\n\nThe big kahuna. There are other methods but regression is perhaps the most important. It is easy to understand, straightforward, and powerful. Your ability to understand it inside and out will make you smarter in every way. You are Tony Stark and regression is your Iron Man suit.\n\n## Assumptions (Scalar Notation)\n\n### Assumption 1: $\\epsilon_i$is normally distributed \n\n1.  This assumption is for the purposes of constructing a hypothesis test. \n2.  We don't need this to estimate our beta. \n3.  But by assuming the errors are normally distributed then we can run a hypothesis test (t-test) to see if we accept or reject the null hypothesis of beta = 0. \n\n### Assumption 2: $E[\\epsilon_i]=0$\n\n1.  The distance between the observed and fitted line is zero. (the residual is zero) \n    1.  This rarely happens **BUT** we estimate our $\\hat{\\beta}$'s so that the error is as close to zero as possible. \n        1.  The goal is to have a line of best fit that does this for all observations. \n\n### Assumption 3: $Var(\\epsilon_i)=\\sigma^2$\n\n1.  This is homoscedasticity (or no heteroskedasticity). \n    1.  We want constant error variance. \n\n    2.  Homoscedasticity visualized:\n\n        ![Homoscedasticity visualized (From Gujarati & Porter)](images/image002.png){width=\"500\"}\n\n### Assumption 4: $Cov(\\epsilon_i,\\epsilon_j)=0 \\:\\forall\\:i \\neq j$\n\n1.  This represents no autocorrelation \n\n2.  The disturbances of i and j are NOT correlated\n\n3.  $\\forall$ means \"for all\"\n\n### Assumption 5: $x_i$ is fixed in repeated sampling\n\n1.  X values are independent fo the error term\n\n### Assumption 6: Sample regression model correctly specified \n\n1.  Our sample regression equation correctly identifies the variables in the theoretical population regression model. \n\n2.  We include all relevant confounding variables. \n\n3.  No omitted variable bias. \n\n### Assumption 7: $Cov(\\epsilon_i,x_i)=0$\n\n1.  covariance between residuals and parameters is equal to zero\n\n### Assumption 8: Parametric Linearity\n\n1.  Linear in the parameters. \n\n2.  We do NOT raise the betas to a power. \n\n    1.  We can raise the variables (x's) to a power and it remains linear. \n\n    2.  Note: Logit models add a \"link function\". This line is not linear but it is still a linear relationship.\n\n### Assumption 9: $x_i$ must vary\n\n1.  Duh. You can't do anything if your X variable doesn't vary.\n\n### Assumption 10: n \\> k\n\n1.  This relates to degrees of freedom.\n2.  We need more operations than we have parameters or else we do not have enough information to test a relationship.\n\n### Assumption 11: No perfect multicollinearity\n\n1.  We wouldn't include a column for male and a column for female because that would be perfect multicollinearity. \n2.  Multicollinearity is not a big issue (it is natural there will be some level of collinearity between our variables). \n    1.  BUT perfect multicollinearity is bad and we do not want it. \n3.  Multicollinearity can (in some cases) disappear as we increase the number of observations.\n4.  This is easy to see in matrix algebra or an excel sheet.\n\n## Assumptions (Matrix Notation)\n\nNote: These assumptions are the EXACT same assumptions listed above. The difference is in notation. Why do we do this? I answer this later, but basically its a different way to write math that is more concise and easier to understand. **We use matrix algebra/notation because as our model gets bigger, scalar notation gets more complicated to read/keep track of.**\n\nWhy do we bold letters? Bold letters represent matrices.\n\n### Assumption 1: Linearity in the parameters\n\n$y_i=x_{i1}\\beta_1+x_{i2}\\beta_2+...+X_{iK}\\beta_K+\\epsilon_i$\n\n1.  The model specifies a linear relationship between y and **X**\n2.  Do not raise the $\\beta$ to a power.\n\n### Assumption 2: Full rank\n\n1.  **X** is an n x K matrix with rank K\n    1.  There is no exact linear relationship among variables \n    2.  Sometimes called the \"identification condition\"\n2.  What is \"rank\"?\n    1.  It is the number of linearly independent columns \n\n        1.  If the number of independent columns is equal to the total number of columns then the matrix is full rank.\n3.  This assumption relates to the scalar assumption of **no perfect multicollinearity.**\n\n### Assumption 3: Exogeneity of the independent variables\n\n1.  The independent variables contain **NO** predictive information about\n\n2.  The expected value of is not a function of the independent variables at any observation (including i):\n\n    1.  $E[\\epsilon_i|x_{j1},x_{j2},...,x_{jK}=0$\n\n        1.  $E[\\epsilon_i|\\textbf{X}]=0$\n\n3.  What does this mean?\n\n    1.  The independent variables are not influenced by the error term or any other unobserved factors in the model.\n\n    2.  The X variable does not depend on the Y variable (reverse causality). We can't have the Y variable influencing our regressors (that would be endogeneity)\n\n### Assumption 4: Spherical disturbances\n\n1.  No autocorrelation\n\n    1.  $E[\\text{Cov}(i,j|\\mathbf{X})] = 0\\: \\forall \\:i=j$\n\n2.  Assumed homoscedasticity\n\n    1.  $E[\\text{Var}(i|\\mathbf{X})] = 2\\: \\forall\\: i=1,2,\\ldots,n$\n\n    2.  Why assumed?\n\n        1.  Some level of heteroscedasticity is not fatal\n\n        2.  We can fix it. But homoscedasticity is always preferable.\n\n3.  These two assumptions can be written mathematically into one single assumption using matrix algebra:\n\n    ![](sphericalpic.png){width=\"347\"}\n\n    1.  The off-diagonal (the zeros) represent autocorrelation\n\n        1.  if these are not zero (or at least very close) we have autocorrelation\n\n    2.  The main-diagonal (the variance) represents our homoscedasticity assumption\n\n        1.  If these values along the main diagonal are not the same or at least very close, then we have heteroscedasticity.\n\n### Assumption 5: Data generation\n\n1.  The data generating process of **X** and $\\epsilon$ are independent.\n\n2.  **X** is generated by a non-stochastic process\n\n3.  this assumption allows us to say \"conditional on X\"\n\n4.  This assumption is a bit confusing to me.\n\n    1.  From my understanding, we want our X values to be fixed. We then take samples to see how our y values vary based on the fixed values of X. \n\n    2.  Let's say you want to predict annual income based on years of experience. Your manager gave you three lists of employees with their annual income. Each list corresponds to a particular experience level --- let's say 3 years, 6 years, and 10 years of experience respectively. Each list contains data on 50 employees. As you can see, the x-values are fixed(3, 6, 10), but have repeated samples (50 data points per sample). This is what is known as Non-stochastic regressors\n\n### Assumption 6: $\\epsilon$ is normally distributed\n\n1.  This is useful for constructing our hypothesis tests and test statistics \n\n2.  Technically, we don't need this for estimating our beta, just uncertainty surrounding it.\n\n## Formula for deriving $\\beta$\n\n-   Problem: We have two missing terms, 𝜷 and 𝛆. Knowing one of these will tell us the line. But since we don't know either of these terms, how do we find it out? \n\n-   We have to solve for beta. Solving for beta in Ordinary Least Squares (OLS) requires us to find a line of best fit that minimizes the unexplained difference (the error). \n\n-   To do this we take the sum of the squared residuals  \n\n    -   It may help to understand this through the formula of the residual. \n\n        -   First the residual is the amount our actual observed value differs from the predicted value (This is in matrix notation). \n\n            -   $(y-\\textbf{X}\\beta_0)$\n\n                -   y is our observed value and the $\\textbf{X}\\beta_0$ is our predicted value (the line of best fit). \n\n            -   WE SQUARE THIS! SO NOW: \n\n                -   $(y-\\textbf{X}\\beta_0)'(y-\\textbf{X}\\beta_0)$\n\n                    -   The (') means transpose. It is matrix notation that allows us to multiply these two matrices (vectors). \n\n                    -   Why do we square? \n\n                        -   We square the residuals for a bunch of reasons. Mainly: if we don't, the residuals (Both positive and negative) cancel out. \n\n                -   Multiplying this through, we get:\n\n                -   $y'y-y'\\textbf{X}\\hat{\\beta_0}'\\textbf{X}'y+\\hat{\\beta_0}'\\textbf{X}'\\textbf{X}$\n\n                -   You collect the terms and simply. \n\n                -   <https://www.youtube.com/watch?v=K_EH2abOp00> see for more\n\n-   SO NOW: we want to find a line $\\hat{\\beta_0}$ such that the derivative (the tangent) is set to 0 aka the minimum, hence LEAST squares. Remember, we do not know the Beta. \n\n    -   We set to zero to find the critical point (the minimum) \n\n    -   Taking the partial derivative with respect to beta, you're essentially finding the point where the error function is not changing with respect to changes in beta. Where the slope of the error function with respect to beta is zero. \n\n    -   ![](beta-1.png){width=\"305\"}\n\n    -   Figure b is a visual representation of what this looks like when we set our minimum. We are finding the tangent line of the function that is equal to zero!\n\n-   The formula is\n\n    -   $\\hat{\\beta}=(\\textbf{X'X})^{-1}\\textbf{X}'y$\n\n        -   this gives us the line of best fit. This is the formula R uses to calculate the beta/line.\n\n-   **Controlling for other variables:**\n\n    -   ![](beta-2.png){width=\"514\"}\n\n    -   Compare figure 3.3 to figure 3.2. They are the same thing. However in 3.3 we have added an additional dimension because of the additional variable. What we are doing remains the same however we now just have more dimensions and we are still trying to find the minimum of that parabola(?) plane(?)\n\n## Controlling for other variables:\n\nA bivariate regression is not a causal model. If we want to know the effect of some variable on Y, then we need to know what other factors might be confounding this relationship. Thus, we move from a bivariate to a multi-variate regression.\n\n### Frisch-Waugh-Lovell (FWL) Theorem\n\nThe FWL theorem can help explain some of the intuition of what is going on when we have a multi-variate regression. Imagine we have some multivariate regression:\n\n$$\nY=β1​X1​+β2​X2​+⋯+βk​Xk​+u\n$$\n\nWe can simply run the full regression, but the FWL states we can get the same coefficient for $\\beta_1$ using the FWL. Again, the FWL is not something you use as an alternative estimation method to regression (you could but that's not the point of it), but it shows the intuition behind what is happening with our main variable and other controls.\n\nThe FWL shows we can derive $\\beta_1$ through three smaller steps:\n\n#### FWL: Step 1\n\nRegress Y on all other X's **except** $X_1$ and collect the residuals. Recall residuals are the difference between our line of best fit (the predicted value) and our actual observation. Basically, how much does our prediction not explain.\n\n$$\nY=β2​X2​+⋯+βk​Xk​+u\n$$\n\nWe run that regression then we take the residuals of that regression:\n\n$$\nY - \\hat{Y} = \\bar{Y}\n$$\n\nThese are the parts of Y **NOT EXPLAINED** by the other controls.\n\n#### FWL: Step 2\n\nRegress $X_1$ on all other X's (except itself) and get the residuals. In other words, run the same regression as above but have $X_1$ as your *dependent variable.*\n\n$$\nX_1=β2​X2​+⋯+βk​Xk​+u\n$$\n\nWe run that regression then we take the residuals of that regression:\n\n$$\nX_1 - \\hat{X_1}=\\bar{X}\n$$\n\nThese are the parts of $X_1$ **NOT EXPLAINED** by the other controls\n\n#### FWL: Step 3\n\nNow have the residuals from both **Step 1** and **Step 2.** We take these residuals and run a regression with them. We have the residuals from step 1: $\\bar{Y}$ and the residuals from step 2: $\\bar{X}$. Thus we run the following regression:\n\n$$\n\\bar{Y}=\\bar{X} +\\bar{\\mu}\n$$\n\nWhen we run this regression, our coefficient for $X_1$ will be the *exact same* as the coefficient in our normal multivariate regression.\n\n#### FWL: Intuition\n\nStep by step, what we just did was:\n\n-   purge Y of the influence of other regressors\n\n-   purge $X_1$ of the influence of other regressors\n\n-   Then we see how those \"cleaned\" up versions of $X_1$ and Y move together.\n\nThis is the partial effect of \\$X_1 on Y aka the multiple regression coefficient.\n\n## Omega Matrix\n\n-   What the hell is an omega matrix $\\Omega$?\n\n    -   The omega matrix is literally 𝛆𝛆' \n\n        -   The error times its transpose.\n\n        -   We obviously can't solve this without knowing what the errors are. \n\n            -   This produces the variance covariance matrix (VCV) AKA covariance matrix of the errors. \n\n-   Why do we care about this matrix? \n\n    -   We need the residuals to get our standard errors. \n\n    -   Additionally, this matrix is used to test our assumptions about the model. Specifically whether our model has autocorrelation and heteroskedasticity. \n\n    -   ![](sphericalpic.png)\n\n    -   This is basically what the omega matrix looks like. This photo however is what we want that omega matrix to look like (ours won't always look like that). But we want the off diagonals to be zero (or effectively zero) and we want the main diagonal to be constant. \n\n        -   If off-diagonal values are \\> 0 \n\n            -   We have autocorrelation\n\n        -   If main-diagonal values are not the same at each value\n\n            -   We have heteroskedasticity. \n\n    -   NOTE: our omega matrix will NEVER be perfectly spherical.\n\n### Conversation with Andy about Omega Matrix:\n\nI emailed Andy about this and figured it might be beneficial to include it here.\n\n***Stone:***\n\n*I am looking back on your \"Roll your own standard errors.r\". I see how the residual maker is part of the variance formula.*\n\n*\\# the formula for s\\^2 is e'e/(n-K)*\n\n*s.2 \\<- (t(e)%\\*%e)/(length(y) - ncol(X))*\n\n*##I ran this code individually and it gave me a scalar. I assume this is the sum of the squared error (SSE)?*\n\n***Andy:***\n\n*Yes, divided by degrees of freedom, so it's a variance*\n\n***Stone:***\n\n*So, autocorrelation and heteroscedasticity manifest through the variance. Then: vcv \\<- s.2\\*(solve(t(X)%\\*%X))*\n\n-   *This is our VCV of the X's and then we take the square root of the diagonal to get our SE.*\n\n*We use the omega (and the assumptions of no spherical errors) to derive the equation for the SE (equation above). However, if we have spherical disturbances and use the same equation to derive our standard errors then our standard errors are wrong.*\n\n***Andy:***\n\n*Yes,if there are non-spherical disturbances than our standard VCV above isn't technically correct anymore b/c the equation doesn't simplify to that.*\n\n***Stone:***\n\n*Then the omega matrix (and its assumptions) is related to the population error. And thus, when we get a sample with spherical disturbances that does not match our expectations of the population error of no spherical disturbances, we then must fix it. Right?*\n\n***Andy:***\n\n*Right...we can't know what the population Omega is, but we can get a good guess based off our sample Omega matrix*\n\n***Stone:***\n\n*So, if we switch the order, e%\\*%t(e) gives us the matrix of errors (WHICH IS NOT THE OMEGA MATRIX(?)). We want our matrix of errors to look like the omega matrix. It never will but we use the various tests to figure out the level of spherical errors that are present in this matrix.*\n\n***Andy:***\n\n*The matrix of the errors IS the Omega matrix, which is the variance covariance matrix of the errors (note the other VCV for our X's above). It'll never be spherical perfectly but our assumptions are about expectations so it just needs to be consistently a problem (e.g., 2 errors can be correlated, but it's only a problem if on average there's a correlation between errors)*\n\n***Stone:***\n\n*Then when we detect spherical disturbances, we purge it or do whatever (FGLS, Robust/cluster SE), which then fixes our variance and then fixes our SE? Do I have all this right? This all feels kind of magical.*\n\n***Andy:***\n\n*If you're running FGLS you're using the info in the residual Omega to adjust both your SE's and coefficients. If you're correcting just your SEs you're basically adjusting the standard SE formula to account for the pattern you want to correct for.*\n\n## Standard Error\n\n1.  Standard Errors are not intuitive to me...but they are important\n\n2.  **Standard error is the standard deviation of the means.** \n\n    1.  The standard error quantifies the variation in the means from multiple sets of measurements. \n\n        1.  What gets often confused is that the standard error can be estimated from a SINGLE set of measurements, even though it describes the means from multiple sets. Thus, even if you only have a single set of measurements, you are often given the option to plot the standard error. \n\n            1.  It is an estimate!\n\n3.  It is worth discussing standard deviation and its formula.\n\n    1.  $\\sigma = \\sqrt{\\frac{\\sum_{i=1}^{N}(x_i - \\mu)^2}{N}}$\n\n        1.  Above is the formula for standard deviation. \n\n            1.  Note: the similarity of this to variance. \n\n4.  Standard error formula is:\n\n    1.  $SE = \\frac{\\sigma}{\\sqrt{n}}$\n\n        1.  The s is the standard deviation! So all that in the standard deviation formula above is IN the standard error formula. \n\n5.  Why are standard errors important? \n\n    1.  Need for precision of our coefficients\n\n        1.  How precise of a claim can we make? \n\n6.  We make assumptions about our standard errors.\\*\\*TK  \n\n    1.  They are normally distributed. \n\n        1.  Not a big deal. \n\n    2.  Assuming the error term is independent and identically distributed. \n\n        1.  Each individual error term follows the same distribution and is uncorrelated with each other.\n\n            1.  Knowing an error term does not tell you anything about another error term.\n\n7.  Autocorrelation/heteroskedasticity do not bias our coefficient. \n\n8.  Presence of autocorrelation leads to an underestimation of the true standard errors. \n\n    1.  Increases the possibility of making a type 1 error. \n\n9.  Standard errors are useful for creating confidence intervals. \n\n## Heteroscedasticity (spherical disturbances)\n\n1.  What is heteroskedasticity? \n    1.  Non-constant error variance. \n\n        1.  See the picture at the beginning of the document of what homoscedasticity looks like. Heteroscedasticity is the opposite of that. \n\n            1.  Think of our errors having a pattern or they \"fan out\"\n\n            2.  Using the omega matrix again, it is when each value along the main diagonal is different. \n2.  THIS AFFECTS OUR STANDARD ERROR! \n    1.  How? \n3.  What does it do to our estimate? \n    1.  Our coefficient is unchanged.\n\n    2.  However the efficiency of our model is influenced. \n\n## Autocorrelation (spherical disturbances)\n\n1.  What is autocorrelation? \n\n2.  THIS AFFECTS OUR STANDARD ERROR! \n\n    1.  How? \n\n## Interactions:\n\nInteractions are used when we believe the relationship is *conditional*. For example, X causes Y, only if Z is active. The effect of X on Y depends on the level of Z. In other words, the effect of one independent variable on the dependent variable is conditioned by another variable.\n\nTo accommodate a relationship such as this one, we multiply the two variables together rather than adding. Goal: deterime whether the function $\\textbf{E}[y|x]$ is constant for different subsamples.\n\n### Interactions increase multicollinearity\n\nTHIS IS OKAY.\n\n### Include all constitutive terms\n\nIt is essential that you include the constitutive terms and the interaction in the model.\n\n**Wrong:** Turnout = Age + Age\\*Race\n\n**Correct:** Turnout = Age + Race + Age\\*Race\n\n### Interpretation\n\nWhen interactions are dichotomous or categorical, interpretation is relatively easy. When the interaction includes a continuous variable, interpretation from the table becomes difficult.\n\n### Interpretation continued\n\nFocusing on individual coefficients for interaction is not advisable. When a model includes interaction terms, the association between the focal predictor and the outcomes is no longer captured by a single coefficient, but rather by a combination of coefficients. See Rohrer & Bundock Models as Prediction Machines: How to Convert Confusing Coefficients into Clear Quantities.\n\n### Example Case\n\nLet's use the example from applied econometrics.\n\n```{r, echo=FALSE, output = FALSE}\nlibrary(haven)\nsetwd(\"~/Stone_Website/notes/Data\")\nnlsy <- read_dta(\"nlsy.dta\")\n\n```\n\nLet's look at the log of wages log(inc95) as our dependent variable and education as our main independent variable. We first restrict our analysis to only females.\n\n```{r}\n# bivariate regression \n\nm1 <- lm(log(inc95) ~ yeared, data = subset(nlsy, female == 1))\nsummary(m1)\n```\n\nWhat does the table tell us? Recall we are only focusing on women!\n\n**Intercept: 8.036830** - This is the average of log earnings of women when years of education is 0.\n\n**yeared: 0.145182** - This is our slope. A one unit increase in years of education increases earnings by 15%.\n\nNow let's run the same regression but only on males.\n\n```{r}\nm2 <- lm(log(inc95) ~ yeared, data = subset(nlsy, female == 0))\nsummary(m2)\n```\n\nWhat does the table tell us? Recall we are only focusing on men!\n\n**Intercept: 8.628191 -** This is the average of log earnings of men when years of education is 0.\n\n**yeared: 0.128389** - This is our slope. A one unit increase in years of education increases earnings by 13%.\n\nWhat is the point of these simple regressions? This becomes clear once we actually run an interaction. In this conception, our question becomes: Is the effect of education on wages, conditional on gender? We just showed that there are different estimates and intercepts for each. But what we don't know is that if they are *statistically different* from each other.\n\n```{r}\nm3 <- lm(log(inc95) ~ yeared*female, data = nlsy)\nsummary(m3)\n```\n\nLet's look at this carefully. You may see some numbers that look familiar!\n\n**Intercept: 8.628191** - This the average of log wages when education is 0 ***for MALES.***\n\n**yeared: .128389** - a one year increase in education results in a 13% change in wages, ***for MALES.***\n\n**female: -0.591361** - now hold on, this is a new number. Actually, it isn't. Add the intercept (8.628191) to the coefficient of female (-.591361). What do you get? You get $8.03683$! That should look familiar because it is the intercept we estimated when we just ran the simple bivariate regression when the data was subset to only female. At `yeared = 0`, women earn **0.591 log points less than men**.\n\n**yeared:female: 0.016793** - While it is a new number, it actually isn't. This tells us how much the slope differs for female. The slope for male is yeared = .128389. For women, the slope is the male slope plus .016793. What does that equal? .128 + .017 = .145. Is the coefficient of .145 look familiar? It should, because that is exactly the slope coefficient we estimated in m1 earlier.\n\nBut interactions aren't special for these reasons, they are special because they quantify whether these effects are different for each subsample. Of course, the coefficients are both different but we need to know if they are *statistically different.* Based off the interaction term, we see a low t-score and a high p-value, indicating that we fail to reject the null hypothesis that the effect of education on wages is the same for male and female. However, even if we have significance, it is important to plot it. Just looking at the table will not tell us *where* the slopes are statistically different from each other.\n\n# Section 4: Basic Questions You Are Too Afraid To Ask\n\n## What are moments?\n\nMoments describe the probability distribution. Think of the shape of the density plot. Technically, two unique distributions could have the same mean or median. However, we need moments to help us better understand the distribution shape.\n\n### Mean\n\n$$\n\\bar{x} = \\frac{\\sum_{i=1}^{n} x_i}{n}\n$$\n\n### Median\n\nasdf\n\n### Mode\n\nfdsaf\n\n### Kurtosis\n\nsadf\n\n## Why do we use matrix algebra? Scalar notation seems fine...\n\nThere are a lot of reasons. In relation to regression, matrix algebra becomes essential because doing this in scalar notation turns into hell. It is simply too hard to do all of that once you get more and more variables. \n\nSecondly, it is how R and other coding languages calculate the coefficient. Why? Long story short, it is less taxing on your computer to do these calculations. Besides more computer sciencey explanations, your computer is doing matrix algebra all the time. \n\nFinally, matrix algebra will be used in further methods classes. This is especially important in machine learning. You are working with an array now but in machine learning, those arrays gain more dimensions. Imagine a matrix stacked upon another matrix and another. These are called tensors. Don't worry, you don't have to deal with these, ever...unless you want to. TK\n\n## What is the difference between covariance and correlation?\n\nCorrelation is covariance divided by the product of the two variables standard deviation. So they measure the same thing but correlation gives an output bounded to \\[-1,1\\] and the covariance takes on the same value as the constitutive terms.\n\nCorrelation is a normalization of covariance. Covariance is hard to interpret because the scale depends on the variances of two inputs. If you see a covariance of 11,350 or 2,489, you don't know what those mean or even which set of variables have a high correlation. Correlation divides variance out and rescales to the interval \\[-1, 1\\], so now you can make those comparisons. Correlation is covariance but has greater readability and usefulness.\n\n## What do dummy variables do to the line? Why don't they change the slope? How come they only shift the intercept?\n\nA dummy variable is a variable coded in binary (0 or 1). Dummy variables can be a factor (0, 1, 2, 3, etc.)\n\n## What is the difference between variance and standard deviation?\n\n## Why is Ordinary Least Squares (OLS) so powerful?\n\nThe power of OLS becomes somewhat clearer as you learn about different methods. OLS is powerful because it is extremely easy to interpret. The interpretation of OLS is easy because we are specifying a linear relationship.\n\nOLS power comes from the popularly known Gauss-Markov assumptions. If these assumptions are met, OLS is BLUE - Best Unbiased Linear Estimator.\n\nDespite its power, OLS has shortfalls. However, it is still important to know OLS, as many methods serve as *extensions* of OLS and adapt it to better fit the data.\n\n## When is OLS not good? Why use other ones?\n\nOLS has numerous advantages. However, OLS has shortfalls that other methods can fix/correct.\n\n1.  OLS is not good with a categorical dependent variable.\n\n## Mediator versus Moderator\n\n### Mediator:\n\nA mediator explains how an independent variable predicts an outcome, outlining the causal mechanism. A mediator tells us why or how something works.\n\n### Moderator:\n\nA moderator variable changes the strength or direction of a relationship between two variables. Moderators tell us when or for whom something works. Influences the *strength* of a relationship. The built environment is a moderator for how people interact, it influences the nature and strength of interaction. But it does not explain how people interact.\n\n## How is standard error difference from standard deviation?\n\n-   <https://www.youtube.com/watch?v=A82brFpdr9g>\n    -   Watch the video.\n-   Standard deviation quantifies the variation within a set of measurements. Standard error quantifies the variation in the MEANS from multiple sets of measurements.\n-   This gets confusing because we can estimate standard error off of one measurement. \n-   Watch the video. Seriously, just watch the damn video.\n\n## Are the assumptions about regression related to the sample or population?\n\n-   This was originally a question on Andy's midterm. I got it wrong. :(\n\n-   The assumptions relate to the population.\n\n    -   We test these assumptions using our sample.\n\n    -   We use samples to tell us what we think the true (population) relationship is.\n\n        -   Using data we have to tell us about data we do not have.\n\n## Why is it called Ordinary Least Squares (OLS)?\n\n## What is variance and why is it important?\n\n$$\n\\text{Variance} (s^2) = \\frac{\\sum_{i=1}^{n} (x_i - \\bar{x})^2}{n-1}\n$$\n\nVariance is a measure of spread. Variance helps us understand the *dispersion* or *variability* in a data set. Variance estimates how far a set of numbers are spread out from the mean value. It can be difficult to interpret based on the output alone. This is because these values are squared, so we can't really tell based on the number alone whether the value is relatively high or low.\n\nUnderstanding variance is critical in statistics. Variance is integral to the efficiency of our estimators. That is, how accurate our model is.\n\n## Why do we care so much about standard errors?\n\n## I am having trouble visualizing OLS with many variables. What do I do?\n\nNot much. We are pretty limited to understanding things in three dimensions. Imagine you have 8 variables in your OLS model. Try to draw an 8 dimensional model that shows the relationship. It is impossible.\n\n## Instrumental variables, what are they? Will I use them? Should I use them?\n\nInstrumental variables are somewhat rare and frowned upon (?) in political science. To be a good instrumental variable, instrumental variables must satisfy two conditions:\n\n1.  The instrumental variable is theoretically relevant to x.\n\n2.  The instrumental variable must satisfy the exclusion restriction.\n\nThe first point requires that our instrument (z) must be endogenous to our independent variable (x)\n\nThe exclusion restriction is typically where instrumental variables get attacked. The instrumental variable (*z* in this case) must only affect X. Z-\\> X -\\> Y. The difficulty to this condition is that there is no statistical test. The exclusion restriction must be defended by theory.\n\nIt is very difficult to find an instrument that is both related to X and does not affect Y. An example of a good instrument is provided below (thank you ChrisP from StackExchange):\n\n*\"For example, suppose we want to estimate the effect of police (*𝑥*) on crime (*𝑦*) in a cross-section of cities. One issue is that places with lots of crime will hire more police. We therefore seek an instrument* 𝑧*𝑧 that is correlated with the size of the police force, but unrelated to crime.*\n\n*One possible* 𝑧 *is number of firefighters. The assumptions are that cities with lots of firefighters also have large police forces (relevance) and that firefighters do not affect crime (exclusion). Relevance can be checked with the reduced form regressions, but whether firefighters also affect crime is something to be argued for. Theoretically, they do not and are therefore a valid instrument.\"*\n\n### Why should we use an instrumental variable?\n\nThe need for an instrumental variable arises when we are concerned for confounding variables or measurement error.\n\nMost of the time these suck. You need to defend them rigorously with theory and even then are hard. Rainfall is one that is used in many cases with success. If asked to use one, the classic rainfall instrumental variable might work.\n\n## Should we care about $R^2$?\n\nIt depends on your question. Chances are you want to find some variable (X) that causes another variable (Y). In this instance, your $R^2$ is mostly irrelevant. You want to see whether that X variable is statistically having an effect on your Y variable. For example, my data 1 project was on the relationship between walkability and voter turnout. I wanted to see if the walkability of an area had an impact on voter turnout in 2016, 2018, and 2020 general elections. Once I accounted for confounding variables, all I cared about was the significance of my variable of interest (walkability). $R^2$ told me nothing that helped me answer this question. \n\nHowever, R\\^2 is very important for questions surrounding prediction. TK\n\nAlso we should focus on adjusted R\\^2\n\nWe are in the business of beta hats not y hats.\n\n## Everyone talks about endogeneity. What is it?!\n\nEndogeneity is when the error term is correlated with the X. Remember that the error term contains everything **not** in our model (everything that determines Y but is NOT X, will be in our error term). If any of those things **not** in our model (the error) are related to our X and affect Y, then we have endogeneity. Endogeneity relates to confounders.\n\nEndogeneity leads to bias in our coefficient.\n\n## What is orthogonal?\n\nThis concept was always a bit confusing as it can have different meaning in different contexts.\n\nORTHOGONAL MEANS INDEPENDENT\n\nSimply put, orthogonality means \"uncorrelated\". An orthogonal model means that all independent variables in that model are uncorrelated. If one or more independent variables are correlated, then that model is **non-orthogonal (**statisticshowto.com)\n\n## Is OLS a causal Inference model?\n\n## Why do we use the normal distribution?\n\n# Section 7: Interpretation Deep Dive\n\n### Example\n\n```{r}\n\n```\n\n## Interpreting Control Variables\n\nOur model, of whatever specification, will likely include numerous control variables. Each of these variables included will have their own coefficient estimated. Of course, we have our main IV, but should we bother to interpret the other variables in our model? No. This is known as the \"Table 2 fallacy\".\n\n# Section 8: Thinking Deeper\n\n## Unbiased Inferences\n\n\"If we apply a method of inference again and again, we will get estimates that are sometimes too small. Across a large number of applications, do we get the right answer *on average*? If yes, then this method, or estimator, is said to be ***unbiased.***\" - KKV\n\nBias occurs when there is a systematic error in the measure that shifts the estimate more in on e direction than another over a set of replications. Note there is *statistical bias* and *substantive bias.*\n\nAn estimator of $\\mu$ is said to be unbiased if it equals $\\mu$ on average over many hypothetical replications of the same experiment.\n\n## Efficiency\n\nWe generally only get to estimate once. We want confidence that the one estimate we get is close to the right one.\n\nEfficiency is measured by calculating the variance of the estimator across hypothetical replications. For unbiased estimators, the smaller the variance, the more efficient (the better) the estimator.\n\n## Bias vs. Efficiency\n\nIt is a tradeoff!\n\n# Section 9: Causal Inference\n\n## Readings Associated:\n\n1.  Keele, Luke. 2015. \"The Statistics of Causal Inference: A View from Political Methodology.\" Political Analysis 23(3): 313--335\n2.  \n\n## What is Causal Inference?\n\nCausality refers to the relational concept where on set of events causes another. Causal inference is the process by which we make claims about causal relationships. Testing causality is done under the counterfactual model, that is, causation is defined in terms of observable and unobservable events.\n\nWhy should we are about the counterfactual model and how is this different from statistics broadly?\n\n1.  the counterfactual approach has provided new insights in the assumptions needed for data to be informative about causality.\n2.  a renewed emphasis on research design and design-based approach.\n\n## The Fundamental Problem of Causal Inference\n\nIt is actually very difficult to say on thing actually caused another. Why? Because we can never observe the real counterfactual. We live in one universe. You cannot observe someone taking both the treatment and placebo pill. You only see the universe in which they took one or the other.\n\n## Components of Causal Inference\n\n### Identification\n\nWe say a parameter in a model is identified if it is theoretically possible to learn the true value of that parameter with an infinite number of observations. We seek to describe the *conclusions* that can be drawn with an infinite sample. Inference requires two components: identification and statistical. Studies of statistical inference on the other hand focus on what can be learned with finite samples. The causal identification step is important to see if it's possible to estimate the effect of *Treatment* on *Outcome*.\n\n#### Estimands\n\nWhat is an estimand? You can think of them as an inquiry. However, the inquiry is the function that operates on events generated by the real world or a simulated world. The estimand is the value of that function. We use \"inquiry\" to refer to the question and \"estimand\" to refer to the answer to the question.\n\nAverage Treatment Effect (ATE): $ATE=\\mathbb{E}[Y_{i1} -Y_{i0}]$\n\n-   The ATE is the average difference in the pair of potential outcomes average over the entire population of interest.\n\nAverage Treatment Effect of the Treated (ATT): $ATT=\\mathbb{E}[Y_{i1} -Y_{i0} |D_i=1]$\n\n-   The ATE defined for the subpopulation exposed to the treatment\n\n    -   We might average over subpopulations defined by pretreatment covariates such as sex and estimate the ATE for females only = ATT.\n\n#### Threats to Identification\n\nConfounding due to a common cause\n\nConfounding due to a common effect\n\n#### Assumptions\n\n1.  Assumption of independence between treatment and potential outcomes.\n2.  The stable unit treatment value assumption (SUTVA) - Rubin 1986\n    1.  there are no hidden forms of treatment, which implies that for for unit $i$ under $D_i=d$, we assume that $Y_{id}=Y_i$\n        1.  AKA the consistency assumption\n    2.  a subject's potential outcome is not affected by other subjects' exposure to the treatment.\n        1.  This is a big problem and must be avoided - think of it as contamination. Your no longer looking at treated vs. control but now between a treated unit and partially treated unit.\n            1.  if we have no knowledge of these spillovers, causal parameters cannot be identified.\n\n## Identification Strategies\n\nA research design intended to solve the causal inference identification problem (Angrist and Pischke 2010). To ask what is your identification strategy IS to ask what research design (and assumptions) one intends to use for the indemnification of a causal effect.\n\n#### Random Experiments\n\nRandomize recipients of treatment. The typical estimand is the ATE (equivalent in this to the ATT).\n\n-   Critical strength of experiments is that the researcher has the ability to impose independence between treatment status and potential outcomes on a set of units because they can impose a particular type of assignment process.\n\n    -   The researcher can assert that the treated and control groups will be identical in all respects, observable and unobserervable. EXCEPT for who got the treatment which is known.\n\n## Randomization\n\nRandomization eliminates selection bias.\n\n#### Natural Experiments\n\n#### Instrumental Variables\n\n#### Regression Discontinuity Designs\n\n#### Selection on Observables\n\n#### Selection on Observables with Temporal Data\n\n#### Partial Identification\n\n#### Mediation Analysis\n\n#### Reasoning About Assumptions\n\n## Is OLS A Causal Inference Model?\n\nIt can be, but hinges important on the Conditional Independence Assumption (CIA). The CIA assumes that treatment status is independent of both potential outcomes. If you can argue, controlling for all these other variables, that the treatment is assigned as if random (like in an RCT), then you can argue that you do not have selection bias (or OVB) and your OLS estimate is a causal effect.\n\n### Defending your OLS as a causal\n\n-   Be clear on what is not a threat.\n\n-   At least sign the bias on remaining threats.\n\n# Section 9.5: Likelihood\n\nThe principle of maximum likelihood is based on the idea that the observed data (even if it is not a random sample) are more likely to have come about as a result of a particular set of parameters. Thus, we flip the problem on its head. *Rather than consider the data as random and the parameters as fixed, the principle of maximum likelihood treats the observed data as fixed and asks: \"What parameter values are most likely to have generated the data?\"* Thus, the parameters are random variables @ward2018maximum.\n\n-   TK - I think it helps to explain what we mean by parameters....\n\n    -   parameters ARE RANDOM VARIABLES!\n\n        -   mean, variance, coefficients, etc\n\n        -   the\n\n*Likelihood* can be thought of as the join probability of the data as a function of parameter values for a particular density or mass function.\n\nThe key innovation in the likelihood framework is treating the observed data as fixed and asking what combination of probability model and parameter values are the most likely to have generated these specific data.\n\nlikelihood is the product of probability distributions, evaluated at each of our observed data points. When we select a model, we have to choose a convenient distribution for our data. Convenenient distribution in this case refers to a a parametric probability distribution.\n\n**In Maximum likelihood, we specify our distrubtion based on the type of data and then we are estimating that distribution's respective parameters. Each distribution, whether poisson, bernoulli, normal, etc. will have some parameter that describes the shape of distribution.**\n\n-   $\\theta=$ \"the set of parameters\" that define your chosen distribution.\n\n-   Example: in a Normal model, $\\theta=(\\mu, \\sigma^2)$\n\n-   In MLE, you find the $\\theta$ that maximizes how likely your data are under that distribution.\n\n    -   thus, this hinges on us specifying the stochastic component correctly.\n\nI dont really understand the iid.\n\n## Why do we need maximum likelihood?\n\nWe use it anytime our dependent variables has a distribution that was not generated by a Gaussian (normal) process. We are trying to estimate the $\\theta$ (parameter) values based on the data we have been given.\n\n## The Basic Structure of MLE\n\n### Stochastic component\n\nStochastic component: $Y_i\\sim f(\\theta_i)$\n\nHere, $f$ is some probability distribution or mass function. These can be Gaussian, binomial, Poisson, Weibull, etc. The stochastic statement describes our assumptions about the probability distributions that govern our data-generating process. The outcome needs to come from an exponential family.\n\n-   What does the theory tell us about the underlying PDF?\n\n-   What do the realized values, $y_i$, tell us? (using histograms, summary stats...)\n\n-   Is your random variable discrete or continuous?\n\n-   Basically: know what type of data you are working with! Is this count, discrete, continuous, time till failure?\n\n-   The most common exponential families in GLM:\n\n    -   Normal\n\n    -   Binomial\n\n    -   Poisson\n\n    -   Gamma\n\n    -   Bernoulli\n\n    -   Multinomial\n\n    -   Negative Binomial\n\n    -   many more...\n\n### Systematic component\n\nSystematic component: $\\theta_i = \\beta_0+ \\beta_1x_i$\n\nThe systematic statement describes our model for the parameters of the assumed probability distribution. We characterize the systematic components by creating a vector of explanatory variables that are linear in the predictors...these are just our normal betas setup in regression. These are the factors that affect the conditional mean of $Y_i, \\mu$.\n\n### The third component (link function)\n\nThe third component which is somewhat of an afterthought compared the the previous two, is the \"link function\". The link function literally *links* the random component with the systematic component.\n\n## Difference between MLE and OLS?\n\nThey are equivalent, and the OLS estimator can be derived under weaker assumptions. But the OLS approach assumes a linear model and unbounded, continuous outcome. The linear model is a good one, but the world around can be both nonlinear and bounded. The ML approach permits us to specify nonlinear models quite easily if warranted by either our theory or data. The flexibility to model categorical and vounded variables is a benefit of the maximum likelihood approach.\n\n# Section 10: Generalized Linear Models (GLM)\n\nGLMS have three components:\n\n-   Random component: This specifies the response variable y and its probability distribution.\n\n-   Linear predictor: Xb\n\n-   link function: this a function g applied to each component of E(y) that relates\n\n    -   the link function connects the random component with the linear predictor.\n\n## Linear Regression\n\nLinear regression is a type of generalized linear model.\n\n**What are the advantages of the MLE approach in the case of ordinary least squares?**\n\n-   none, they are equivalent, and the OLS estimator can be derived under weaker assumptions. But the OLS approach assumes a linear model and unbounded, continuous outcome. @agresti2015foundations\n\nThe maximum likelihood approach permits us to specify nonlinear models quite easily if warranted by either our theory or data. The flexibility to model categorical and bounded variables is a benefit of the maximum likelihood approach.\n\ndo we still estimate the betas the same though?\n\n## Logit\n\nModels the probability of an event. Dependent variable is binary (0 or 1). The logit is a cumulative density function -it can be thought of as a distribution.\n\n### Link Function:\n\n$$\nf(x) = \\frac{1}{1+e^{-X_i\\beta}}\n$$\n\n### Logit Interpretation\n\nThe output from the logit is the log odds value. Literally an odds ratio logged.\n\n#### Odds Ratio\n\nWhat is an odds ratio?\n\n$$\nOdds = \\frac{Probability \\ Event \\ Occurs\\ (p)}{ Probability \\ Event \\ Does \\ Not\\ Occur \\ (1-p)}\n$$\n\n#### Logit Limitations\n\n-   In small samples, ML estimates of logit model coefficients have substantial bias away from zero @rainey2021estimating\n\n    -   you can use a penalized maximum likelihood to fix this issue.\n\n### Can We Just Use OLS?\n\n-   You could. In fact, many (mostly economists) argue that this is economical and won't be too much different.\n\n    -   Linear interpretations of betas\n\n    -   simple\n\n    -   Works well if $X_i$ is also distributed Bernoulli\n\n-   Problems:\n\n    -   impossible predictions\n\n    -   TK\n\n## Probit\n\n### Probit Interpretation\n\n# Section 11: Model Selection\n\nThis section is intended for application purposes. What model do we used based on our data and application purpose? The bulk of this decision is driven by the structure of our data, specifically the dependent variable.\n\n![Source: @agresti2015foundations](model_selection.jpg){fig-align=\"center\"}\n\n## Ordinary Least Squares (OLS)\n\n## 2 Stage Least Squares\n\n## Logit\n\n## Probit\n\n## Negative Binomial\n\n## Poisson\n\n## Multinomial Logit\n\n## Ordinal Logit\n\n# Section X: Bias\n\n## What is Bias?\n\nBias is\n\n## Where does bias show up?\n\nBias relates to our coefficients ($\\beta$)'s!\n\n## Types of Bias:\n\n### Selection Bias\n\nAs social scientists, we are interested in making causal arguments, our X causes variation in Y. In reality, when we use data, we have some variable of interest and a list of theorized control variables. We can think of our variable of interest as *the treatment*. However, we are not assigning our treatment randomly; there are likely specific (or latent) factors of a person that may influence their likelihood to receive the treatment. In this case, our treatment is not randomly assigned.\n\nLet's use an example from my own study. I am interested in the effects of a walkable environment on voting turnout. I wan't to make the case that living in a walkable area *causes* people to vote more. However, I cannot randomly assign people to live in walkable or non-walkable areas. People can *self-select* (for the most part) where they want to live. I have data on people's voting history and where they live. I decide to a run a regression with voter turnout as my DV and the walkability of where they live as my IV, with an assortment of related control variables. I find a positive association, thus, living in a walkable area *causes* people to turnout to vote at a higher rate, right? No, what I have described is textbook selection bias occurring. My treatment (walkability of an area) is **not** randomly assigned. People can move for a variety of reasons. Maybe there is something about people wanting to live in a walkable environment (self-selecting) and being more likely to vote. Thus our estimate we derived earlier is biased as it does not account for people self-selecting into the treatment.\n\n**To make a causal argument, we need to make sure that our potential outcomes are independent of the treatment status so that we can argue that we have no selection bias (this is the CIA). Randomization ensures the treatment status is independent of our observation's untreated outcomes.** This is possible in a randomized control trial (RCT), but when we can't do an RCT, we rely on our data. If we can argue that our treatment assignment is independent of our variables, then we can make a causal argument.\n\n### Omitted Variable Bias (OVB)\n\nRemember that we are trying to estimate the effect of some X on Y. However, if we do a simple regression, and say this is the effect of X on Y, then we are likely engaging in an OVB. Basically, OVB occurs when you are missing an important control variable. Your regression is *mis-specified.*\n\nOVB biases our coefficient on a number line. It is always positive or negative.\n\n#### Signing the bias\n\n|             |                   |                   |\n|-------------|-------------------|-------------------|\n|             | $Corr(x_1,x_2)>0$ | $Corr(x_1,x_2)<0$ |\n| $\\beta_2>0$ | positive bias     | negative bias     |\n| $\\beta_2<0$ | negative bias     | positive bias     |\n\n: Signing the Bias Table\n\nThis table helps to understand what variables you should control for. Just because a variable influences our dependent variable, does ***not*** mean you need to control for it. If that were the case, we would need to basically include a million variables. We only need to control when that variable influences our DV ***AND*** correlates with our main independent variable of interest. In simple terms, OVB is just not including the right control variables which causes a mis-specification of our regression.\n\nThe direction tells us how our OVB is influencing our coefficient between our main independent variable and our DV.\n\n# Section X: Bias v. Inefficiency Tradeoff\n\n# Section X: What influences our Standard Errors?\n\n# Section X: Panel Data\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"toc":true,"output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.4.554","editor":"visual","theme":{"light":["cosmo","theme.scss"],"dark":["cosmo","../../theme-dark.scss"]},"title":"Data 1 & 2","description":"Combined notes from Data 1 & 2 with Anand Sokhey and Andy Phillips","author":[{"name":"Stone Neilon","url":"https://stoneneilon.github.io/","orcid":"0009-0006-6026-4384","affiliation":"PhD student of political science @ The University of Colorado Boulder","affiliation-url":"https://www.colorado.edu/polisci/people/graduate-students/stone-neilon"}],"date":"05-15-2024","categories":["Spring","Fall",2024,"Methods",2023],"citation":{"url":"https://stoneneilon.github.io/notes/Data/"},"image":"oppy.jpg","bibliography":["ref.bib"],"draft":false},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}